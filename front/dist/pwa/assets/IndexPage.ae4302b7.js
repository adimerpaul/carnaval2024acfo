import{Q as Di}from"./QImg.d9f6ac4a.js";import{c as et,a as k,h as L,e as bn,$ as Eo,D as Mi,a0 as Oo,E as zi,r as S,j as pt,y as Ut,x as qe,p as Fi,a1 as wn,a2 as Lo,a3 as Ao,a4 as To,a5 as ht,g as N,a6 as Qn,w as he,o as J,f as Le,a7 as ji,l as sn,a8 as Jn,a9 as Hi,M as Ui,aa as Wi,ab as Ki,ac as $i,F as Qi,G as Ji,ad as Yi,ae as Gi,af as Xi,ag as Zi,ah as er,ai as tr,aj as Yn,J as nr,ak as or,al as ir,am as rr,an as sr,ao as lr,n as ar,ap as ur,aq as cr,H as dr,I as fr,ar as hr,as as pr,at as Gn,B as at,au as vr,av as mr,Q as yr,aw as gr,ax as Xe,z as br,ay as ln,A as wr,az as Sr,aA as _r,aB as Cr,aC as Z,k as ee,aD as K,aE as re,N as kr,s as be,O as Sn,aF as Er,_ as Or,P as Ve,S as xe,T as ut,U as W,V,aG as Et,aH as Ot,aI as Lt,W as Pe,aJ as Xn,aK as At,aL as Lr,X as ue,v as Tt,Y as xt,aM as Zn,aN as Ar}from"./index.778c4669.js";import{r as an,Q as eo}from"./rtl.13f6bda3.js";import{Q as Tr}from"./QChip.72ae4be5.js";import{c as xr}from"./selection.aa55aa12.js";import{Q as Rr}from"./QPage.371c2612.js";import{u as Br,a as en,b as Vr}from"./axios.d2178077.js";var un=et({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const n=k(()=>parseInt(e.lines,10)),o=k(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),i=k(()=>e.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>L("div",{style:i.value,class:o.value},bn(t.default))}}),cn=et({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const n=k(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>L("div",{class:n.value},bn(t.default))}}),dn=et({name:"QItem",props:{...Eo,...Mi,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:n}){const{proxy:{$q:o}}=pt(),i=Oo(e,o),{hasLink:r,linkAttrs:s,linkClass:a,linkTag:u,navigateOnClick:d}=zi(),c=S(null),v=S(null),w=k(()=>e.clickable===!0||r.value===!0||e.tag==="label"),h=k(()=>e.disable!==!0&&w.value===!0),p=k(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(i.value===!0?" q-item--dark":"")+(r.value===!0&&e.active===null?a.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(h.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),M=k(()=>{if(e.insetLevel===void 0)return null;const _=o.lang.rtl===!0?"Right":"Left";return{["padding"+_]:16+e.insetLevel*56+"px"}});function q(_){h.value===!0&&(v.value!==null&&(_.qKeyEvent!==!0&&document.activeElement===c.value?v.value.focus():document.activeElement===v.value&&c.value.focus()),d(_))}function x(_){if(h.value===!0&&Ut(_,[13,32])===!0){qe(_),_.qKeyEvent=!0;const A=new MouseEvent("click",_);A.qKeyEvent=!0,c.value.dispatchEvent(A)}n("keyup",_)}function D(){const _=Fi(t.default,[]);return h.value===!0&&_.unshift(L("div",{class:"q-focus-helper",tabindex:-1,ref:v})),_}return()=>{const _={ref:c,class:p.value,style:M.value,role:"listitem",onClick:q,onKeyup:x};return h.value===!0?(_.tabindex=e.tabindex||"0",Object.assign(_,s.value)):w.value===!0&&(_["aria-disabled"]="true"),L(u.value,_,D())}}}),Pr=et({name:"QField",inheritAttrs:!1,props:{...wn,tag:{type:String,default:"label"}},emits:Lo,setup(){return Ao(To({requiredForAttr:!1,tagProp:!0}))}});const qr={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Ir({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:o,proxy:i,emit:r}=pt(),s=S(null);let a=null;function u(h){return s.value===null?!1:h===void 0||h.touches===void 0||h.touches.length<=1}const d={};n===void 0&&(Object.assign(d,{hide(h){i.hide(h)},toggle(h){i.toggle(h),h.qAnchorHandled=!0},toggleKey(h){Ut(h,13)===!0&&d.toggle(h)},contextClick(h){i.hide(h),ht(h),N(()=>{i.show(h),h.qAnchorHandled=!0})},prevent:ht,mobileTouch(h){if(d.mobileCleanup(h),u(h)!==!0)return;i.hide(h),s.value.classList.add("non-selectable");const p=h.target;Qn(d,"anchor",[[p,"touchmove","mobileCleanup","passive"],[p,"touchend","mobileCleanup","passive"],[p,"touchcancel","mobileCleanup","passive"],[s.value,"contextmenu","prevent","notPassive"]]),a=setTimeout(()=>{a=null,i.show(h),h.qAnchorHandled=!0},300)},mobileCleanup(h){s.value.classList.remove("non-selectable"),a!==null&&(clearTimeout(a),a=null),e.value===!0&&h!==void 0&&xr()}}),n=function(h=o.contextMenu){if(o.noParentEvent===!0||s.value===null)return;let p;h===!0?i.$q.platform.is.mobile===!0?p=[[s.value,"touchstart","mobileTouch","passive"]]:p=[[s.value,"mousedown","hide","passive"],[s.value,"contextmenu","contextClick","notPassive"]]:p=[[s.value,"click","toggle","passive"],[s.value,"keyup","toggleKey","passive"]],Qn(d,"anchor",p)});function c(){ji(d,"anchor")}function v(h){for(s.value=h;s.value.classList.contains("q-anchor--skip");)s.value=s.value.parentNode;n()}function w(){if(o.target===!1||o.target===""||i.$el.parentNode===null)s.value=null;else if(o.target===!0)v(i.$el.parentNode);else{let h=o.target;if(typeof o.target=="string")try{h=document.querySelector(o.target)}catch{h=void 0}h!=null?(s.value=h.$el||h,n()):(s.value=null,console.error(`Anchor: target "${o.target}" not found`))}}return he(()=>o.contextMenu,h=>{s.value!==null&&(c(),n(h))}),he(()=>o.target,()=>{s.value!==null&&c(),w()}),he(()=>o.noParentEvent,h=>{s.value!==null&&(h===!0?c():n())}),J(()=>{w(),t!==!0&&o.modelValue===!0&&s.value===null&&r("update:modelValue",!1)}),Le(()=>{a!==null&&clearTimeout(a),c()}),{anchorEl:s,canShow:u,anchorEvents:d}}function Nr(e,t){const n=S(null);let o;function i(a,u){const d=`${u!==void 0?"add":"remove"}EventListener`,c=u!==void 0?u:o;a!==window&&a[d]("scroll",c,sn.passive),window[d]("scroll",c,sn.passive),o=u}function r(){n.value!==null&&(i(n.value),n.value=null)}const s=he(()=>e.noParentEvent,()=>{n.value!==null&&(r(),t())});return Le(s),{localScrollTarget:n,unconfigureScrollTarget:r,changeScrollEvent:i}}const{notPassiveCapture:Ft}=sn,Ue=[];function jt(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=Jn.length-1;for(;n>=0;){const o=Jn[n].$;if(o.type.name==="QTooltip"){n--;continue}if(o.type.name!=="QDialog")break;if(o.props.seamless!==!0)return;n--}for(let o=Ue.length-1;o>=0;o--){const i=Ue[o];if((i.anchorEl.value===null||i.anchorEl.value.contains(t)===!1)&&(t===document.body||i.innerRef.value!==null&&i.innerRef.value.contains(t)===!1))e.qClickOutside=!0,i.onClickOutside(e);else return}}function Dr(e){Ue.push(e),Ue.length===1&&(document.addEventListener("mousedown",jt,Ft),document.addEventListener("touchstart",jt,Ft))}function to(e){const t=Ue.findIndex(n=>n===e);t>-1&&(Ue.splice(t,1),Ue.length===0&&(document.removeEventListener("mousedown",jt,Ft),document.removeEventListener("touchstart",jt,Ft)))}let no,oo;function io(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Mr(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const fn={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{fn[`${e}#ltr`]=e,fn[`${e}#rtl`]=e});function ro(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:fn[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function zr(e,t){let{top:n,left:o,right:i,bottom:r,width:s,height:a}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],o-=t[0],r+=t[1],i+=t[0],s+=t[0],a+=t[1]),{top:n,bottom:r,height:a,left:o,right:i,width:s,middle:o+(i-o)/2,center:n+(r-n)/2}}function Fr(e,t,n){let{top:o,left:i}=e.getBoundingClientRect();return o+=t.top,i+=t.left,n!==void 0&&(o+=n[1],i+=n[0]),{top:o,bottom:o+1,height:1,left:i,right:i+1,width:1,middle:i,center:o}}function jr(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function so(e,t,n,o){return{top:e[n.vertical]-t[o.vertical],left:e[n.horizontal]-t[o.horizontal]}}function xo(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{xo(e,t+1)},10);return}const{targetEl:n,offset:o,anchorEl:i,anchorOrigin:r,selfOrigin:s,absoluteOffset:a,fit:u,cover:d,maxHeight:c,maxWidth:v}=e;if(Hi.is.ios===!0&&window.visualViewport!==void 0){const R=document.body.style,{offsetLeft:G,offsetTop:Q}=window.visualViewport;G!==no&&(R.setProperty("--q-pe-left",G+"px"),no=G),Q!==oo&&(R.setProperty("--q-pe-top",Q+"px"),oo=Q)}const{scrollLeft:w,scrollTop:h}=n,p=a===void 0?zr(i,d===!0?[0,0]:o):Fr(i,a,o);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:v||"100vw",maxHeight:c||"100vh",visibility:"visible"});const{offsetWidth:M,offsetHeight:q}=n,{elWidth:x,elHeight:D}=u===!0||d===!0?{elWidth:Math.max(p.width,M),elHeight:d===!0?Math.max(p.height,q):q}:{elWidth:M,elHeight:q};let _={maxWidth:v,maxHeight:c};(u===!0||d===!0)&&(_.minWidth=p.width+"px",d===!0&&(_.minHeight=p.height+"px")),Object.assign(n.style,_);const A=jr(x,D);let H=so(p,A,r,s);if(a===void 0||o===void 0)tn(H,p,A,r,s);else{const{top:R,left:G}=H;tn(H,p,A,r,s);let Q=!1;if(H.top!==R){Q=!0;const C=2*o[1];p.center=p.top-=C,p.bottom-=C+2}if(H.left!==G){Q=!0;const C=2*o[0];p.middle=p.left-=C,p.right-=C+2}Q===!0&&(H=so(p,A,r,s),tn(H,p,A,r,s))}_={top:H.top+"px",left:H.left+"px"},H.maxHeight!==void 0&&(_.maxHeight=H.maxHeight+"px",p.height>H.maxHeight&&(_.minHeight=_.maxHeight)),H.maxWidth!==void 0&&(_.maxWidth=H.maxWidth+"px",p.width>H.maxWidth&&(_.minWidth=_.maxWidth)),Object.assign(n.style,_),n.scrollTop!==h&&(n.scrollTop=h),n.scrollLeft!==w&&(n.scrollLeft=w)}function tn(e,t,n,o,i){const r=n.bottom,s=n.right,a=Ui(),u=window.innerHeight-a,d=document.body.clientWidth;if(e.top<0||e.top+r>u)if(i.vertical==="center")e.top=t[o.vertical]>u/2?Math.max(0,u-r):0,e.maxHeight=Math.min(r,u);else if(t[o.vertical]>u/2){const c=Math.min(u,o.vertical==="center"?t.center:o.vertical===i.vertical?t.bottom:t.top);e.maxHeight=Math.min(r,c),e.top=Math.max(0,c-r)}else e.top=Math.max(0,o.vertical==="center"?t.center:o.vertical===i.vertical?t.top:t.bottom),e.maxHeight=Math.min(r,u-e.top);if(e.left<0||e.left+s>d)if(e.maxWidth=Math.min(s,d),i.horizontal==="middle")e.left=t[o.horizontal]>d/2?Math.max(0,d-s):0;else if(t[o.horizontal]>d/2){const c=Math.min(d,o.horizontal==="middle"?t.middle:o.horizontal===i.horizontal?t.right:t.left);e.maxWidth=Math.min(s,c),e.left=Math.max(0,c-e.maxWidth)}else e.left=Math.max(0,o.horizontal==="middle"?t.middle:o.horizontal===i.horizontal?t.left:t.right),e.maxWidth=Math.min(s,d-e.left)}var Hr=et({name:"QMenu",inheritAttrs:!1,props:{...qr,...Wi,...Eo,...Ki,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:io},self:{type:String,validator:io},offset:{type:Array,validator:Mr},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...$i,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:o}){let i=null,r,s,a;const u=pt(),{proxy:d}=u,{$q:c}=d,v=S(null),w=S(!1),h=k(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),p=Oo(e,c),{registerTick:M,removeTick:q}=Qi(),{registerTimeout:x}=Ji(),{transitionProps:D,transitionStyle:_}=Yi(e),{localScrollTarget:A,changeScrollEvent:H,unconfigureScrollTarget:R}=Nr(e,T),{anchorEl:G,canShow:Q}=Ir({showing:w}),{hide:C}=Gi({showing:w,canShow:Q,handleShow:Me,handleHide:f,hideOnRouteChange:h,processOnMount:!0}),{showPortal:I,hidePortal:we,renderPortal:fe}=Xi(u,v,oe,"menu"),Te={anchorEl:G,innerRef:v,onClickOutside(m){if(e.persistent!==!0&&w.value===!0)return C(m),(m.type==="touchstart"||m.target.classList.contains("q-dialog__backdrop"))&&qe(m),!0}},De=k(()=>ro(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),Re=k(()=>e.cover===!0?De.value:ro(e.self||"top start",c.lang.rtl)),ve=k(()=>(e.square===!0?" q-menu--square":"")+(p.value===!0?" q-menu--dark q-dark":"")),it=k(()=>e.autoClose===!0?{onClick:F}:{}),Be=k(()=>w.value===!0&&e.persistent!==!0);he(Be,m=>{m===!0?(rr(B),Dr(Te)):(Yn(B),to(Te))});function Se(){sr(()=>{let m=v.value;m&&m.contains(document.activeElement)!==!0&&(m=m.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||m.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||m.querySelector("[autofocus], [data-autofocus]")||m,m.focus({preventScroll:!0}))})}function Me(m){if(i=e.noRefocus===!1?document.activeElement:null,Zi(X),I(),T(),r=void 0,m!==void 0&&(e.touchPosition||e.contextMenu)){const le=er(m);if(le.left!==void 0){const{top:_e,left:We}=G.value.getBoundingClientRect();r={left:le.left-We,top:le.top-_e}}}s===void 0&&(s=he(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,O)),e.noFocus!==!0&&document.activeElement.blur(),M(()=>{O(),e.noFocus!==!0&&Se()}),x(()=>{c.platform.is.ios===!0&&(a=e.autoClose,v.value.click()),O(),I(!0),n("show",m)},e.transitionDuration)}function f(m){q(),we(),g(!0),i!==null&&(m===void 0||m.qClickOutside!==!0)&&(((m&&m.type.indexOf("key")===0?i.closest('[tabindex]:not([tabindex^="-"])'):void 0)||i).focus(),i=null),x(()=>{we(!0),n("hide",m)},e.transitionDuration)}function g(m){r=void 0,s!==void 0&&(s(),s=void 0),(m===!0||w.value===!0)&&(tr(X),R(),to(Te),Yn(B)),m!==!0&&(i=null)}function T(){(G.value!==null||e.scrollTarget!==void 0)&&(A.value=nr(G.value,e.scrollTarget),H(A.value,O))}function F(m){a!==!0?(or(d,m),n("click",m)):a=!1}function X(m){Be.value===!0&&e.noFocus!==!0&&lr(v.value,m.target)!==!0&&Se()}function B(m){n("escapeKey"),C(m)}function O(){xo({targetEl:v.value,offset:e.offset,anchorEl:G.value,anchorOrigin:De.value,selfOrigin:Re.value,absoluteOffset:r,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function oe(){return L(ir,D.value,()=>w.value===!0?L("div",{role:"menu",...o,ref:v,tabindex:-1,class:["q-menu q-position-engine scroll"+ve.value,o.class],style:[o.style,_.value],...it.value},bn(t.default)):null)}return Le(g),Object.assign(d,{focus:Se,updatePosition:O}),fe}});const ge=1e3,Ur=["start","center","end","start-force","center-force","end-force"],Ro=Array.prototype.filter,Wr=window.getComputedStyle(document.body).overflowAnchor===void 0?ar:function(e,t){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];Ro.call(n,i=>i.dataset&&i.dataset.qVsAnchor!==void 0).forEach(i=>{delete i.dataset.qVsAnchor});const o=n[t];o&&o.dataset&&(o.dataset.qVsAnchor="")}))};function Ze(e,t){return e+t}function nn(e,t,n,o,i,r,s,a){const u=e===window?document.scrollingElement||document.documentElement:e,d=i===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-s-a,scrollMaxSize:0,offsetStart:-s,offsetEnd:-a};if(i===!0?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=u.scrollLeft,c.scrollViewSize+=u.clientWidth),c.scrollMaxSize=u.scrollWidth,r===!0&&(c.scrollStart=(an===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=u.scrollTop,c.scrollViewSize+=u.clientHeight),c.scrollMaxSize=u.scrollHeight),n!==null)for(let v=n.previousElementSibling;v!==null;v=v.previousElementSibling)v.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=v[d]);if(o!==null)for(let v=o.nextElementSibling;v!==null;v=v.nextElementSibling)v.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=v[d]);if(t!==e){const v=u.getBoundingClientRect(),w=t.getBoundingClientRect();i===!0?(c.offsetStart+=w.left-v.left,c.offsetEnd-=w.width):(c.offsetStart+=w.top-v.top,c.offsetEnd-=w.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function lo(e,t,n,o){t==="end"&&(t=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(o===!0&&(t=(an===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-t),window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t):n===!0?(o===!0&&(t=(an===!0?e.scrollWidth-e.offsetWidth:0)-t),e.scrollLeft=t):e.scrollTop=t}function ct(e,t,n,o){if(n>=o)return 0;const i=t.length,r=Math.floor(n/ge),s=Math.floor((o-1)/ge)+1;let a=e.slice(r,s).reduce(Ze,0);return n%ge!==0&&(a-=t.slice(r*ge,n).reduce(Ze,0)),o%ge!==0&&o!==i&&(a-=t.slice(o,s*ge).reduce(Ze,0)),a}const Kr={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},$r={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Kr};function Qr({virtualScrollLength:e,getVirtualScrollTarget:t,getVirtualScrollEl:n,virtualScrollItemSizeComputed:o}){const i=pt(),{props:r,emit:s,proxy:a}=i,{$q:u}=a;let d,c,v,w=[],h;const p=S(0),M=S(0),q=S({}),x=S(null),D=S(null),_=S(null),A=S({from:0,to:0}),H=k(()=>r.tableColspan!==void 0?r.tableColspan:100);o===void 0&&(o=k(()=>r.virtualScrollItemSize));const R=k(()=>o.value+";"+r.virtualScrollHorizontal),G=k(()=>R.value+";"+r.virtualScrollSliceRatioBefore+";"+r.virtualScrollSliceRatioAfter);he(G,()=>{ve()}),he(R,Q);function Q(){Re(c,!0)}function C(f){Re(f===void 0?c:f)}function I(f,g){const T=t();if(T==null||T.nodeType===8)return;const F=nn(T,n(),x.value,D.value,r.virtualScrollHorizontal,u.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd);v!==F.scrollViewSize&&ve(F.scrollViewSize),fe(T,F,Math.min(e.value-1,Math.max(0,parseInt(f,10)||0)),0,Ur.indexOf(g)>-1?g:c>-1&&f>c?"end":"start")}function we(){const f=t();if(f==null||f.nodeType===8)return;const g=nn(f,n(),x.value,D.value,r.virtualScrollHorizontal,u.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd),T=e.value-1,F=g.scrollMaxSize-g.offsetStart-g.offsetEnd-M.value;if(d===g.scrollStart)return;if(g.scrollMaxSize<=0){fe(f,g,0,0);return}v!==g.scrollViewSize&&ve(g.scrollViewSize),Te(A.value.from);const X=Math.floor(g.scrollMaxSize-Math.max(g.scrollViewSize,g.offsetEnd)-Math.min(h[T],g.scrollViewSize/2));if(X>0&&Math.ceil(g.scrollStart)>=X){fe(f,g,T,g.scrollMaxSize-g.offsetEnd-w.reduce(Ze,0));return}let B=0,O=g.scrollStart-g.offsetStart,oe=O;if(O<=F&&O+g.scrollViewSize>=p.value)O-=p.value,B=A.value.from,oe=O;else for(let m=0;O>=w[m]&&B<T;m++)O-=w[m],B+=ge;for(;O>0&&B<T;)O-=h[B],O>-g.scrollViewSize?(B++,oe=O):oe=h[B]+O;fe(f,g,B,oe)}function fe(f,g,T,F,X){const B=typeof X=="string"&&X.indexOf("-force")>-1,O=B===!0?X.replace("-force",""):X,oe=O!==void 0?O:"start";let m=Math.max(0,T-q.value[oe]),le=m+q.value.total;le>e.value&&(le=e.value,m=Math.max(0,le-q.value.total)),d=g.scrollStart;const _e=m!==A.value.from||le!==A.value.to;if(_e===!1&&O===void 0){Be(T);return}const{activeElement:We}=document,Ce=_.value;_e===!0&&Ce!==null&&Ce!==We&&Ce.contains(We)===!0&&(Ce.addEventListener("focusout",De),setTimeout(()=>{Ce!==null&&Ce.removeEventListener("focusout",De)})),Wr(Ce,T-m);const wt=O!==void 0?h.slice(m,T).reduce(Ze,0):0;if(_e===!0){const ze=le>=A.value.from&&m<=A.value.to?A.value.to:le;A.value={from:m,to:ze},p.value=ct(w,h,0,m),M.value=ct(w,h,le,e.value),requestAnimationFrame(()=>{A.value.to!==le&&d===g.scrollStart&&(A.value={from:A.value.from,to:le},M.value=ct(w,h,le,e.value))})}requestAnimationFrame(()=>{if(d!==g.scrollStart)return;_e===!0&&Te(m);const ze=h.slice(m,T).reduce(Ze,0),Fe=ze+g.offsetStart+p.value,St=Fe+h[T];let rt=Fe+F;if(O!==void 0){const Qt=ze-wt,st=g.scrollStart+Qt;rt=B!==!0&&st<Fe&&St<st+g.scrollViewSize?st:O==="end"?St-g.scrollViewSize:Fe-(O==="start"?0:Math.round((g.scrollViewSize-h[T])/2))}d=rt,lo(f,rt,r.virtualScrollHorizontal,u.lang.rtl),Be(T)})}function Te(f){const g=_.value;if(g){const T=Ro.call(g.children,m=>m.classList&&m.classList.contains("q-virtual-scroll--skip")===!1),F=T.length,X=r.virtualScrollHorizontal===!0?m=>m.getBoundingClientRect().width:m=>m.offsetHeight;let B=f,O,oe;for(let m=0;m<F;){for(O=X(T[m]),m++;m<F&&T[m].classList.contains("q-virtual-scroll--with-prev")===!0;)O+=X(T[m]),m++;oe=O-h[B],oe!==0&&(h[B]+=oe,w[Math.floor(B/ge)]+=oe),B++}}}function De(){_.value!==null&&_.value!==void 0&&_.value.focus()}function Re(f,g){const T=1*o.value;(g===!0||Array.isArray(h)===!1)&&(h=[]);const F=h.length;h.length=e.value;for(let B=e.value-1;B>=F;B--)h[B]=T;const X=Math.floor((e.value-1)/ge);w=[];for(let B=0;B<=X;B++){let O=0;const oe=Math.min((B+1)*ge,e.value);for(let m=B*ge;m<oe;m++)O+=h[m];w.push(O)}c=-1,d=void 0,p.value=ct(w,h,0,A.value.from),M.value=ct(w,h,A.value.to,e.value),f>=0?(Te(A.value.from),N(()=>{I(f)})):Se()}function ve(f){if(f===void 0&&typeof window!="undefined"){const O=t();O!=null&&O.nodeType!==8&&(f=nn(O,n(),x.value,D.value,r.virtualScrollHorizontal,u.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd).scrollViewSize)}v=f;const g=parseFloat(r.virtualScrollSliceRatioBefore)||0,T=parseFloat(r.virtualScrollSliceRatioAfter)||0,F=1+g+T,X=f===void 0||f<=0?1:Math.ceil(f/o.value),B=Math.max(1,X,Math.ceil((r.virtualScrollSliceSize>0?r.virtualScrollSliceSize:10)/F));q.value={total:Math.ceil(B*F),start:Math.ceil(B*g),center:Math.ceil(B*(.5+g)),end:Math.ceil(B*(1+g)),view:X}}function it(f,g){const T=r.virtualScrollHorizontal===!0?"width":"height",F={["--q-virtual-scroll-item-"+T]:o.value+"px"};return[f==="tbody"?L(f,{class:"q-virtual-scroll__padding",key:"before",ref:x},[L("tr",[L("td",{style:{[T]:`${p.value}px`,...F},colspan:H.value})])]):L(f,{class:"q-virtual-scroll__padding",key:"before",ref:x,style:{[T]:`${p.value}px`,...F}}),L(f,{class:"q-virtual-scroll__content",key:"content",ref:_,tabindex:-1},g.flat()),f==="tbody"?L(f,{class:"q-virtual-scroll__padding",key:"after",ref:D},[L("tr",[L("td",{style:{[T]:`${M.value}px`,...F},colspan:H.value})])]):L(f,{class:"q-virtual-scroll__padding",key:"after",ref:D,style:{[T]:`${M.value}px`,...F}})]}function Be(f){c!==f&&(r.onVirtualScroll!==void 0&&s("virtualScroll",{index:f,from:A.value.from,to:A.value.to-1,direction:f<c?"decrease":"increase",ref:a}),c=f)}ve();const Se=ur(we,u.platform.is.ios===!0?120:35);cr(()=>{ve()});let Me=!1;return dr(()=>{Me=!0}),fr(()=>{if(Me!==!0)return;const f=t();d!==void 0&&f!==void 0&&f!==null&&f.nodeType!==8?lo(f,d,r.virtualScrollHorizontal,u.lang.rtl):I(c)}),Le(()=>{Se.cancel()}),Object.assign(a,{scrollTo:I,reset:Q,refresh:C}),{virtualScrollSliceRange:A,virtualScrollSliceSizeComputed:q,setVirtualScrollSize:ve,onVirtualScrollEvt:Se,localResetVirtualScroll:Re,padVirtualScroll:it,scrollTo:I,reset:Q,refresh:C}}function ao(e,t,n){if(n<=t)return t;const o=n-t+1;let i=t+(e-t)%o;return i<t&&(i=o+i),i===0?0:i}const uo=e=>["add","add-unique","toggle"].includes(e),Jr=".*+?^${}()|[]\\",Yr=Object.keys(wn);var Gr=et({name:"QSelect",inheritAttrs:!1,props:{...$r,...hr,...wn,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:uo},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Lo,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:t,emit:n}){const{proxy:o}=pt(),{$q:i}=o,r=S(!1),s=S(!1),a=S(-1),u=S(""),d=S(!1),c=S(!1);let v=null,w=null,h,p,M,q=null,x,D,_,A;const H=S(null),R=S(null),G=S(null),Q=S(null),C=S(null),I=pr(e),we=gr(Hn),fe=k(()=>Array.isArray(e.options)?e.options.length:0),Te=k(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:De,virtualScrollSliceSizeComputed:Re,localResetVirtualScroll:ve,padVirtualScroll:it,onVirtualScrollEvt:Be,scrollTo:Se,setVirtualScrollSize:Me}=Qr({virtualScrollLength:fe,getVirtualScrollTarget:Ei,getVirtualScrollEl:Fn,virtualScrollItemSizeComputed:Te}),f=To(),g=k(()=>{const l=e.mapOptions===!0&&e.multiple!==!0,b=e.modelValue!==void 0&&(e.modelValue!==null||l===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const y=e.mapOptions===!0&&h!==void 0?h:[],E=b.map(U=>ki(U,y));return e.modelValue===null&&l===!0?E.filter(U=>U!==null):E}return b}),T=k(()=>{const l={};return Yr.forEach(b=>{const y=e[b];y!==void 0&&(l[b]=y)}),l}),F=k(()=>e.optionsDark===null?f.isDark.value:e.optionsDark),X=k(()=>Gn(g.value)),B=k(()=>{let l="q-field__input q-placeholder col";return e.hideSelected===!0||g.value.length===0?[l,e.inputClass]:(l+=" q-field__input--padding",e.inputClass===void 0?l:[l,e.inputClass])}),O=k(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),oe=k(()=>fe.value===0),m=k(()=>g.value.map(l=>pe.value(l)).join(", ")),le=k(()=>e.displayValue!==void 0?e.displayValue:m.value),_e=k(()=>e.optionsHtml===!0?()=>!0:l=>l!=null&&l.html===!0),We=k(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||g.value.some(_e.value))),Ce=k(()=>f.focused.value===!0?e.tabindex:-1),wt=k(()=>{const l={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":r.value===!0?"true":"false","aria-controls":`${f.targetUid.value}_lb`};return a.value>=0&&(l["aria-activedescendant"]=`${f.targetUid.value}_${a.value}`),l}),ze=k(()=>({id:`${f.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Fe=k(()=>g.value.map((l,b)=>({index:b,opt:l,html:_e.value(l),selected:!0,removeAtIndex:Ci,toggleOption:je,tabindex:Ce.value}))),St=k(()=>{if(fe.value===0)return[];const{from:l,to:b}=De.value;return e.options.slice(l,b).map((y,E)=>{const U=Ke.value(y)===!0,j=Gt(y)===!0,ae=l+E,ie={clickable:!0,active:j,activeClass:st.value,manualFocus:!0,focused:!1,disable:U,tabindex:-1,dense:e.optionsDense,dark:F.value,role:"option","aria-selected":j===!0?"true":"false",id:`${f.targetUid.value}_${ae}`,onClick:()=>{je(y)}};return U!==!0&&(a.value===ae&&(ie.focused=!0),i.platform.is.desktop===!0&&(ie.onMousemove=()=>{r.value===!0&&$e(ae)})),{index:ae,opt:y,html:_e.value(y),label:pe.value(y),selected:ie.active,focused:ie.focused,toggleOption:je,setOptionIndex:$e,itemProps:ie}})}),rt=k(()=>e.dropdownIcon!==void 0?e.dropdownIcon:i.iconSet.arrow.dropdown),Qt=k(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),st=k(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),ke=k(()=>Yt(e.optionValue,"value")),pe=k(()=>Yt(e.optionLabel,"label")),Ke=k(()=>Yt(e.optionDisable,"disable")),_t=k(()=>g.value.map(l=>ke.value(l))),_i=k(()=>{const l={onInput:Hn,onChange:we,onKeydown:zn,onKeyup:Dn,onKeypress:Mn,onFocus:In,onClick(b){p===!0&&Xe(b)}};return l.onCompositionstart=l.onCompositionupdate=l.onCompositionend=we,l});he(g,l=>{h=l,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&f.innerLoading.value!==!0&&(s.value!==!0&&r.value!==!0||X.value!==!0)&&(M!==!0&&Ge(),(s.value===!0||r.value===!0)&&Qe(""))},{immediate:!0}),he(()=>e.fillInput,Ge),he(r,Xt),he(fe,Ni);function Pn(l){return e.emitValue===!0?ke.value(l):l}function Jt(l){if(l>-1&&l<g.value.length)if(e.multiple===!0){const b=e.modelValue.slice();n("remove",{index:l,value:b.splice(l,1)[0]}),n("update:modelValue",b)}else n("update:modelValue",null)}function Ci(l){Jt(l),f.focus()}function qn(l,b){const y=Pn(l);if(e.multiple!==!0){e.fillInput===!0&&lt(pe.value(l),!0,!0),n("update:modelValue",y);return}if(g.value.length===0){n("add",{index:0,value:y}),n("update:modelValue",e.multiple===!0?[y]:y);return}if(b===!0&&Gt(l)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const E=e.modelValue.slice();n("add",{index:E.length,value:y}),E.push(y),n("update:modelValue",E)}function je(l,b){if(f.editable.value!==!0||l===void 0||Ke.value(l)===!0)return;const y=ke.value(l);if(e.multiple!==!0){b!==!0&&(lt(e.fillInput===!0?pe.value(l):"",!0,!0),He()),R.value!==null&&R.value.focus(),(g.value.length===0||at(ke.value(g.value[0]),y)!==!0)&&n("update:modelValue",e.emitValue===!0?y:l);return}if((p!==!0||d.value===!0)&&f.focus(),In(),g.value.length===0){const j=e.emitValue===!0?y:l;n("add",{index:0,value:j}),n("update:modelValue",e.multiple===!0?[j]:j);return}const E=e.modelValue.slice(),U=_t.value.findIndex(j=>at(j,y));if(U>-1)n("remove",{index:U,value:E.splice(U,1)[0]});else{if(e.maxValues!==void 0&&E.length>=e.maxValues)return;const j=e.emitValue===!0?y:l;n("add",{index:E.length,value:j}),E.push(j)}n("update:modelValue",E)}function $e(l){if(i.platform.is.desktop!==!0)return;const b=l>-1&&l<fe.value?l:-1;a.value!==b&&(a.value=b)}function Ct(l=1,b){if(r.value===!0){let y=a.value;do y=ao(y+l,-1,fe.value-1);while(y!==-1&&y!==a.value&&Ke.value(e.options[y])===!0);a.value!==y&&($e(y),Se(y),b!==!0&&e.useInput===!0&&e.fillInput===!0&&kt(y>=0?pe.value(e.options[y]):x,!0))}}function ki(l,b){const y=E=>at(ke.value(E),l);return e.options.find(y)||b.find(y)||l}function Yt(l,b){const y=l!==void 0?l:b;return typeof y=="function"?y:E=>E!==null&&typeof E=="object"&&y in E?E[y]:E}function Gt(l){const b=ke.value(l);return _t.value.find(y=>at(y,b))!==void 0}function In(l){e.useInput===!0&&R.value!==null&&(l===void 0||R.value===l.target&&l.target.value===m.value)&&R.value.select()}function Nn(l){Ut(l,27)===!0&&r.value===!0&&(Xe(l),He(),Ge()),n("keyup",l)}function Dn(l){const{value:b}=l.target;if(l.keyCode!==void 0){Nn(l);return}if(l.target.value="",v!==null&&(clearTimeout(v),v=null),w!==null&&(clearTimeout(w),w=null),Ge(),typeof b=="string"&&b.length!==0){const y=b.toLocaleLowerCase(),E=j=>{const ae=e.options.find(ie=>j.value(ie).toLocaleLowerCase()===y);return ae===void 0?!1:(g.value.indexOf(ae)===-1?je(ae):He(),!0)},U=j=>{E(ke)!==!0&&(E(pe)===!0||j===!0||Qe(b,!0,()=>U(!0)))};U()}else f.clearValue(l)}function Mn(l){n("keypress",l)}function zn(l){if(n("keydown",l),br(l)===!0)return;const b=u.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),y=l.shiftKey!==!0&&e.multiple!==!0&&(a.value>-1||b===!0);if(l.keyCode===27){ht(l);return}if(l.keyCode===9&&y===!1){Je();return}if(l.target===void 0||l.target.id!==f.targetUid.value||f.editable.value!==!0)return;if(l.keyCode===40&&f.innerLoading.value!==!0&&r.value===!1){qe(l),Ye();return}if(l.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&u.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Jt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(l.keyCode===35||l.keyCode===36)&&(typeof u.value!="string"||u.value.length===0)&&(qe(l),a.value=-1,Ct(l.keyCode===36?1:-1,e.multiple)),(l.keyCode===33||l.keyCode===34)&&Re.value!==void 0&&(qe(l),a.value=Math.max(-1,Math.min(fe.value,a.value+(l.keyCode===33?-1:1)*Re.value.view)),Ct(l.keyCode===33?1:-1,e.multiple)),(l.keyCode===38||l.keyCode===40)&&(qe(l),Ct(l.keyCode===38?-1:1,e.multiple));const E=fe.value;if((_===void 0||A<Date.now())&&(_=""),E>0&&e.useInput!==!0&&l.key!==void 0&&l.key.length===1&&l.altKey===!1&&l.ctrlKey===!1&&l.metaKey===!1&&(l.keyCode!==32||_.length!==0)){r.value!==!0&&Ye(l);const U=l.key.toLocaleLowerCase(),j=_.length===1&&_[0]===U;A=Date.now()+1500,j===!1&&(qe(l),_+=U);const ae=new RegExp("^"+_.split("").map(Zt=>Jr.indexOf(Zt)>-1?"\\"+Zt:Zt).join(".*"),"i");let ie=a.value;if(j===!0||ie<0||ae.test(pe.value(e.options[ie]))!==!0)do ie=ao(ie+1,-1,E-1);while(ie!==a.value&&(Ke.value(e.options[ie])===!0||ae.test(pe.value(e.options[ie]))!==!0));a.value!==ie&&N(()=>{$e(ie),Se(ie),ie>=0&&e.useInput===!0&&e.fillInput===!0&&kt(pe.value(e.options[ie]),!0)});return}if(!(l.keyCode!==13&&(l.keyCode!==32||e.useInput===!0||_!=="")&&(l.keyCode!==9||y===!1))){if(l.keyCode!==9&&qe(l),a.value>-1&&a.value<E){je(e.options[a.value]);return}if(b===!0){const U=(j,ae)=>{if(ae){if(uo(ae)!==!0)return}else ae=e.newValueMode;if(lt("",e.multiple!==!0,!0),j==null)return;(ae==="toggle"?je:qn)(j,ae==="add-unique"),e.multiple!==!0&&(R.value!==null&&R.value.focus(),He())};if(e.onNewValue!==void 0?n("newValue",u.value,U):U(u.value),e.multiple!==!0)return}r.value===!0?Je():f.innerLoading.value!==!0&&Ye()}}function Fn(){return p===!0?C.value:G.value!==null&&G.value.contentEl!==null?G.value.contentEl:void 0}function Ei(){return Fn()}function Oi(){return e.hideSelected===!0?[]:t["selected-item"]!==void 0?Fe.value.map(l=>t["selected-item"](l)).slice():t.selected!==void 0?[].concat(t.selected()):e.useChips===!0?Fe.value.map((l,b)=>L(Tr,{key:"option-"+b,removable:f.editable.value===!0&&Ke.value(l.opt)!==!0,dense:!0,textColor:e.color,tabindex:Ce.value,onRemove(){l.removeAtIndex(b)}},()=>L("span",{class:"ellipsis",[l.html===!0?"innerHTML":"textContent"]:pe.value(l.opt)}))):[L("span",{[We.value===!0?"innerHTML":"textContent"]:le.value})]}function jn(){if(oe.value===!0)return t["no-option"]!==void 0?t["no-option"]({inputValue:u.value}):void 0;const l=t.option!==void 0?t.option:y=>L(dn,{key:y.index,...y.itemProps},()=>L(cn,()=>L(un,()=>L("span",{[y.html===!0?"innerHTML":"textContent"]:y.label}))));let b=it("div",St.value.map(l));return t["before-options"]!==void 0&&(b=t["before-options"]().concat(b)),wr(t["after-options"],b)}function Li(l,b){const y=b===!0?{...wt.value,...f.splitAttrs.attributes.value}:void 0,E={ref:b===!0?R:void 0,key:"i_t",class:B.value,style:e.inputStyle,value:u.value!==void 0?u.value:"",type:"search",...y,id:b===!0?f.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":l===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,..._i.value};return l!==!0&&p===!0&&(Array.isArray(E.class)===!0?E.class=[...E.class,"no-pointer-events"]:E.class+=" no-pointer-events"),L("input",E)}function Hn(l){v!==null&&(clearTimeout(v),v=null),w!==null&&(clearTimeout(w),w=null),!(l&&l.target&&l.target.qComposing===!0)&&(kt(l.target.value||""),M=!0,x=u.value,f.focused.value!==!0&&(p!==!0||d.value===!0)&&f.focus(),e.onFilter!==void 0&&(v=setTimeout(()=>{v=null,Qe(u.value)},e.inputDebounce)))}function kt(l,b){u.value!==l&&(u.value=l,b===!0||e.inputDebounce===0||e.inputDebounce==="0"?n("inputValue",l):w=setTimeout(()=>{w=null,n("inputValue",l)},e.inputDebounce))}function lt(l,b,y){M=y!==!0,e.useInput===!0&&(kt(l,!0),(b===!0||y!==!0)&&(x=l),b!==!0&&Qe(l))}function Qe(l,b,y){if(e.onFilter===void 0||b!==!0&&f.focused.value!==!0)return;f.innerLoading.value===!0?n("filterAbort"):(f.innerLoading.value=!0,c.value=!0),l!==""&&e.multiple!==!0&&g.value.length!==0&&M!==!0&&l===pe.value(g.value[0])&&(l="");const E=setTimeout(()=>{r.value===!0&&(r.value=!1)},10);q!==null&&clearTimeout(q),q=E,n("filter",l,(U,j)=>{(b===!0||f.focused.value===!0)&&q===E&&(clearTimeout(q),typeof U=="function"&&U(),c.value=!1,N(()=>{f.innerLoading.value=!1,f.editable.value===!0&&(b===!0?r.value===!0&&He():r.value===!0?Xt(!0):r.value=!0),typeof j=="function"&&N(()=>{j(o)}),typeof y=="function"&&N(()=>{y(o)})}))},()=>{f.focused.value===!0&&q===E&&(clearTimeout(q),f.innerLoading.value=!1,c.value=!1),r.value===!0&&(r.value=!1)})}function Ai(){return L(Hr,{ref:G,class:O.value,style:e.popupContentStyle,modelValue:r.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&oe.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:F.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Qt.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...ze.value,onScrollPassive:Be,onBeforeShow:Wn,onBeforeHide:Ti,onShow:xi},jn)}function Ti(l){Kn(l),Je()}function xi(){Me()}function Ri(l){Xe(l),R.value!==null&&R.value.focus(),d.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Bi(l){Xe(l),N(()=>{d.value=!1})}function Vi(){const l=[L(Pr,{class:`col-auto ${f.fieldClass.value}`,...T.value,for:f.targetUid.value,dark:F.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:u.value.length!==0,...f.splitAttrs.listeners.value,onFocus:Ri,onBlur:Bi},{...t,rawControl:()=>f.getControl(!0),before:void 0,after:void 0})];return r.value===!0&&l.push(L("div",{ref:C,class:O.value+" scroll",style:e.popupContentStyle,...ze.value,onClick:ht,onScrollPassive:Be},jn())),L(ln,{ref:Q,modelValue:s.value,position:e.useInput===!0?"top":void 0,transitionShow:D,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Wn,onBeforeHide:Pi,onHide:qi,onShow:Ii},()=>L("div",{class:"q-select__dialog"+(F.value===!0?" q-select__dialog--dark q-dark":"")+(d.value===!0?" q-select__dialog--focused":"")},l))}function Pi(l){Kn(l),Q.value!==null&&Q.value.__updateRefocusTarget(f.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),f.focused.value=!1}function qi(l){He(),f.focused.value===!1&&n("blur",l),Ge()}function Ii(){const l=document.activeElement;(l===null||l.id!==f.targetUid.value)&&R.value!==null&&R.value!==l&&R.value.focus(),Me()}function Je(){s.value!==!0&&(a.value=-1,r.value===!0&&(r.value=!1),f.focused.value===!1&&(q!==null&&(clearTimeout(q),q=null),f.innerLoading.value===!0&&(n("filterAbort"),f.innerLoading.value=!1,c.value=!1)))}function Ye(l){f.editable.value===!0&&(p===!0?(f.onControlFocusin(l),s.value=!0,N(()=>{f.focus()})):f.focus(),e.onFilter!==void 0?Qe(u.value):(oe.value!==!0||t["no-option"]!==void 0)&&(r.value=!0))}function He(){s.value=!1,Je()}function Ge(){e.useInput===!0&&lt(e.multiple!==!0&&e.fillInput===!0&&g.value.length!==0&&pe.value(g.value[0])||"",!0,!0)}function Xt(l){let b=-1;if(l===!0){if(g.value.length!==0){const y=ke.value(g.value[0]);b=e.options.findIndex(E=>at(ke.value(E),y))}ve(b)}$e(b)}function Ni(l,b){r.value===!0&&f.innerLoading.value===!1&&(ve(-1,!0),N(()=>{r.value===!0&&f.innerLoading.value===!1&&(l>b?ve():Xt(!0))}))}function Un(){s.value===!1&&G.value!==null&&G.value.updatePosition()}function Wn(l){l!==void 0&&Xe(l),n("popupShow",l),f.hasPopupOpen=!0,f.onControlFocusin(l)}function Kn(l){l!==void 0&&Xe(l),n("popupHide",l),f.hasPopupOpen=!1,f.onControlFocusout(l)}function $n(){p=i.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?t["no-option"]!==void 0||e.onFilter!==void 0||oe.value===!1:!0),D=i.platform.is.ios===!0&&p===!0&&e.useInput===!0?"fade":e.transitionShow}return vr($n),mr(Un),$n(),Le(()=>{v!==null&&clearTimeout(v),w!==null&&clearTimeout(w)}),Object.assign(o,{showPopup:Ye,hidePopup:He,removeAtIndex:Jt,add:qn,toggleOption:je,getOptionIndex:()=>a.value,setOptionIndex:$e,moveOptionSelection:Ct,filter:Qe,updateMenuPosition:Un,updateInputValue:lt,isOptionSelected:Gt,getEmittingOptionValue:Pn,isOptionDisabled:(...l)=>Ke.value.apply(null,l)===!0,getOptionValue:(...l)=>ke.value.apply(null,l),getOptionLabel:(...l)=>pe.value.apply(null,l)}),Object.assign(f,{innerValue:g,fieldClass:k(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:H,targetRef:R,hasValue:X,showPopup:Ye,floatingLabel:k(()=>e.hideSelected!==!0&&X.value===!0||typeof u.value=="number"||u.value.length!==0||Gn(e.displayValue)),getControlChild:()=>{if(f.editable.value!==!1&&(s.value===!0||oe.value!==!0||t["no-option"]!==void 0))return p===!0?Vi():Ai();f.hasPopupOpen===!0&&(f.hasPopupOpen=!1)},controlEvents:{onFocusin(l){f.onControlFocusin(l)},onFocusout(l){f.onControlFocusout(l,()=>{Ge(),Je()})},onClick(l){if(ht(l),p!==!0&&r.value===!0){Je(),R.value!==null&&R.value.focus();return}Ye(l)}},getControl:l=>{const b=Oi(),y=l===!0||s.value!==!0||p!==!0;if(e.useInput===!0)b.push(Li(l,y));else if(f.editable.value===!0){const U=y===!0?wt.value:void 0;b.push(L("input",{ref:y===!0?R:void 0,key:"d_t",class:"q-select__focus-target",id:y===!0?f.targetUid.value:void 0,value:le.value,readonly:!0,"data-autofocus":l===!0||e.autofocus===!0||void 0,...U,onKeydown:zn,onKeyup:Nn,onKeypress:Mn})),y===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&b.push(L("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Dn}))}if(I.value!==void 0&&e.disable!==!0&&_t.value.length!==0){const U=_t.value.map(j=>L("option",{value:j,selected:!0}));b.push(L("select",{class:"hidden",name:I.value,multiple:e.multiple},U))}const E=e.useInput===!0||y!==!0?void 0:f.splitAttrs.attributes.value;return L("div",{class:"q-field__native row items-center",...E,...f.splitAttrs.listeners.value},b)},getInnerAppend:()=>e.loading!==!0&&c.value!==!0&&e.hideDropdownIcon!==!0?[L(yr,{class:"q-select__dropdown-icon"+(r.value===!0?" rotate-180":""),name:rt.value})]:null}),Ao(f)}});function co(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var Rt=Sr({name:"close-popup",beforeMount(e,{value:t}){const n={depth:co(t),handler(o){n.depth!==0&&setTimeout(()=>{const i=_r(e);i!==void 0&&Cr(i,o,n.depth)})},handlerKey(o){Ut(o,13)===!0&&n.handler(o)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=co(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});const fo=(e,t)=>{for(const n of Object.keys(t))e.on(n,t[n])},Bo=e=>{for(const t of Object.keys(e)){const n=e[t];n&&Ie(n.cancel)&&n.cancel()}},Xr=e=>!e||typeof e.charAt!="function"?e:e.charAt(0).toUpperCase()+e.slice(1),Ie=e=>typeof e=="function",te=(e,t,n)=>{for(const o in n){const i="set"+Xr(o);e[i]?he(()=>n[o],(r,s)=>{e[i](r,s)}):t[i]&&he(()=>n[o],r=>{t[i](r)})}},Y=(e,t,n={})=>{const o={...n};for(const i in e){const r=t[i],s=e[i];r&&(r&&r.custom===!0||s!==void 0&&(o[i]=s))}return o},ce=e=>{const t={},n={};for(const o in e)if(o.startsWith("on")&&!o.startsWith("onUpdate")&&o!=="onReady"){const i=o.slice(2).toLocaleLowerCase();t[i]=e[o]}else n[o]=e[o];return{listeners:t,attrs:n}},Zr=async e=>{const t=await Promise.all([K(()=>import("./marker-icon-2x.17982e67.js"),[]),K(()=>import("./marker-icon.c1a4cbf5.js"),[]),K(()=>import("./marker-shadow.91c47cf3.js"),[])]);delete e.Default.prototype._getIconUrl,e.Default.mergeOptions({iconRetinaUrl:t[0].default,iconUrl:t[1].default,shadowUrl:t[2].default})},Bt=e=>{const t=S((...o)=>console.warn(`Method ${e} has been invoked without being replaced`)),n=(...o)=>t.value(...o);return n.wrapped=t,be(e,n),n},Vt=(e,t)=>e.wrapped.value=t,$=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,z=e=>{const t=ee(e);if(t===void 0)throw new Error(`Attempt to inject ${e.description} before it was provided.`);return t},ne=Symbol("useGlobalLeaflet"),de=Symbol("addLayer"),Wt=Symbol("removeLayer"),vt=Symbol("registerControl"),Vo=Symbol("registerLayerControl"),Po=Symbol("canSetParentHtml"),qo=Symbol("setParentHtml"),Io=Symbol("setIcon"),No=Symbol("bindPopup"),Do=Symbol("bindTooltip"),Mo=Symbol("unbindPopup"),zo=Symbol("unbindTooltip"),mt={options:{type:Object,default:()=>({}),custom:!0}},yt=e=>({options:e.options,methods:{}}),tt={...mt,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},gt=(e,t,n)=>{const o=z(de),i=z(Wt),{options:r,methods:s}=yt(e),a=Y(e,tt,r),u=()=>o({leafletObject:t.value}),d=()=>i({leafletObject:t.value}),c={...s,setAttribution(v){d(),t.value.options.attribution=v,e.visible&&u()},setName(){d(),e.visible&&u()},setLayerType(){d(),e.visible&&u()},setVisible(v){t.value&&(v?u():d())},bindPopup(v){if(!t.value||!Ie(t.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}t.value.bindPopup(v)},bindTooltip(v){if(!t.value||!Ie(t.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}t.value.bindTooltip(v)},unbindTooltip(){t.value&&(Ie(t.value.closeTooltip)&&t.value.closeTooltip(),Ie(t.value.unbindTooltip)&&t.value.unbindTooltip())},unbindPopup(){t.value&&(Ie(t.value.closePopup)&&t.value.closePopup(),Ie(t.value.unbindPopup)&&t.value.unbindPopup())},updateVisibleProp(v){n.emit("update:visible",v)}};return be(No,c.bindPopup),be(Do,c.bindTooltip),be(Mo,c.unbindPopup),be(zo,c.unbindTooltip),Sn(()=>{c.unbindPopup(),c.unbindTooltip(),d()}),{options:a,methods:c}},Ae=(e,t)=>{if(e&&t.default)return L("div",{style:{display:"none"}},t.default())},Fo={...tt,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},es=(e,t,n)=>{const{options:o,methods:i}=gt(e,t,n);return{options:Y(e,Fo,o),methods:i}},_n={...Fo,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},jo=(e,t,n)=>{const{options:o,methods:i}=es(e,t,n),r=Y(e,_n,o),s=z(Wt),a={...i,setStroke(u){t.value.setStyle({stroke:u})},setColor(u){t.value.setStyle({color:u})},setWeight(u){t.value.setStyle({weight:u})},setOpacity(u){t.value.setStyle({opacity:u})},setLineCap(u){t.value.setStyle({lineCap:u})},setLineJoin(u){t.value.setStyle({lineJoin:u})},setDashArray(u){t.value.setStyle({dashArray:u})},setDashOffset(u){t.value.setStyle({dashOffset:u})},setFill(u){t.value.setStyle({fill:u})},setFillColor(u){t.value.setStyle({fillColor:u})},setFillOpacity(u){t.value.setStyle({fillOpacity:u})},setFillRule(u){t.value.setStyle({fillRule:u})},setClassName(u){t.value.setStyle({className:u})}};return Le(()=>{s({leafletObject:t.value})}),{options:r,methods:a}},Cn={..._n,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}},Ho=(e,t,n)=>{const{options:o,methods:i}=jo(e,t,n),r=Y(e,Cn,o),s={...i,setRadius(a){t.value.setRadius(a)},setLatLng(a){t.value.setLatLng(a)}};return{options:r,methods:s}},Uo={...Cn,radius:{type:Number}},ts=(e,t,n)=>{const{options:o,methods:i}=Ho(e,t,n),r=Y(e,Uo,o),s={...i};return{options:r,methods:s}};Z({name:"LCircle",props:Uo,setup(e,t){const n=S(),o=S(!1),i=ee(ne),r=z(de),{options:s,methods:a}=ts(e,n,t);return J(async()=>{const{circle:u}=i?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(u(e.latLng,s));const{listeners:d}=ce(t.attrs);n.value.on(d),te(a,n.value,e),r({...e,...a,leafletObject:n.value}),o.value=!0,N(()=>t.emit("ready",n.value))}),{ready:o,leafletObject:n}},render(){return Ae(this.ready,this.$slots)}});Z({name:"LCircleMarker",props:Cn,setup(e,t){const n=S(),o=S(!1),i=ee(ne),r=z(de),{options:s,methods:a}=Ho(e,n,t);return J(async()=>{const{circleMarker:u}=i?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(u(e.latLng,s));const{listeners:d}=ce(t.attrs);n.value.on(d),te(a,n.value,e),r({...e,...a,leafletObject:n.value}),o.value=!0,N(()=>t.emit("ready",n.value))}),{ready:o,leafletObject:n}},render(){return Ae(this.ready,this.$slots)}});const nt={...mt,position:{type:String}},bt=(e,t)=>{const{options:n,methods:o}=yt(e),i=Y(e,nt,n),r={...o,setPosition(s){t.value&&t.value.setPosition(s)}};return Sn(()=>{t.value&&t.value.remove()}),{options:i,methods:r}},ns=e=>e.default?L("div",{ref:"root"},e.default()):null,os=Z({name:"LControl",props:{...nt,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(e,t){const n=S(),o=S(),i=ee(ne),r=z(vt),{options:s,methods:a}=bt(e,n);return J(async()=>{const{Control:u,DomEvent:d}=i?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]),c=u.extend({onAdd(){return o.value}});n.value=re(new c(s)),te(a,n.value,e),r({leafletObject:n.value}),e.disableClickPropagation&&o.value&&d.disableClickPropagation(o.value),e.disableScrollPropagation&&o.value&&d.disableScrollPropagation(o.value),N(()=>t.emit("ready",n.value))}),{root:o,leafletObject:n}},render(){return ns(this.$slots)}}),Wo={...nt,prefix:{type:String}},is=(e,t)=>{const{options:n,methods:o}=bt(e,t),i=Y(e,Wo,n),r={...o,setPrefix(s){t.value.setPrefix(s)}};return{options:i,methods:r}};Z({name:"LControlAttribution",props:Wo,setup(e,t){const n=S(),o=ee(ne),i=z(vt),{options:r,methods:s}=is(e,n);return J(async()=>{const{control:a}=o?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(a.attribution(r)),te(s,n.value,e),i({leafletObject:n.value}),N(()=>t.emit("ready",n.value))}),{leafletObject:n}},render(){return null}});const Ko={...nt,collapsed:{type:Boolean,default:void 0},autoZIndex:{type:Boolean,default:void 0},hideSingleBase:{type:Boolean,default:void 0},sortLayers:{type:Boolean,default:void 0},sortFunction:{type:Function}},rs=(e,t)=>{const{options:n}=bt(e,t);return{options:Y(e,Ko,n),methods:{addLayer(o){o.layerType==="base"?t.value.addBaseLayer(o.leafletObject,o.name):o.layerType==="overlay"&&t.value.addOverlay(o.leafletObject,o.name)},removeLayer(o){t.value.removeLayer(o.leafletObject)}}}},ss=Z({name:"LControlLayers",props:Ko,setup(e,t){const n=S(),o=ee(ne),i=z(Vo),{options:r,methods:s}=rs(e,n);return J(async()=>{const{control:a}=o?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(a.layers(void 0,void 0,r)),te(s,n.value,e),i({...e,...s,leafletObject:n.value}),N(()=>t.emit("ready",n.value))}),{leafletObject:n}},render(){return null}}),$o={...nt,maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}},ls=(e,t)=>{const{options:n,methods:o}=bt(e,t);return{options:Y(e,$o,n),methods:o}};Z({name:"LControlScale",props:$o,setup(e,t){const n=S(),o=ee(ne),i=z(vt),{options:r,methods:s}=ls(e,n);return J(async()=>{const{control:a}=o?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(a.scale(r)),te(s,n.value,e),i({leafletObject:n.value}),N(()=>t.emit("ready",n.value))}),{leafletObject:n}},render(){return null}});const Qo={...nt,zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}},as=(e,t)=>{const{options:n,methods:o}=bt(e,t);return{options:Y(e,Qo,n),methods:o}};Z({name:"LControlZoom",props:Qo,setup(e,t){const n=S(),o=ee(ne),i=z(vt),{options:r,methods:s}=as(e,n);return J(async()=>{const{control:a}=o?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(a.zoom(r)),te(s,n.value,e),i({leafletObject:n.value}),N(()=>t.emit("ready",n.value))}),{leafletObject:n}},render(){return null}});const Kt={...tt},kn=(e,t,n)=>{const{options:o,methods:i}=gt(e,t,n),r=Y(e,Kt,o),s={...i,addLayer(a){t.value.addLayer(a.leafletObject)},removeLayer(a){t.value.removeLayer(a.leafletObject)}};return be(de,s.addLayer),be(Wt,s.removeLayer),{options:r,methods:s}},Jo={...Kt},us=(e,t,n)=>{const{options:o,methods:i}=kn(e,t,n),r=Y(e,Jo,o),s={...i};return{options:r,methods:s}};Z({props:Jo,setup(e,t){const n=S(),o=S(!1),i=ee(ne),r=z(de),{methods:s,options:a}=us(e,n,t);return J(async()=>{const{featureGroup:u}=i?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(u(void 0,a));const{listeners:d}=ce(t.attrs);n.value.on(d),te(s,n.value,e),r({...e,...s,leafletObject:n.value}),o.value=!0,N(()=>t.emit("ready",n.value))}),{ready:o,leafletObject:n}},render(){return Ae(this.ready,this.$slots)}});const Yo={...Kt,geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:Function,custom:!0}},cs=(e,t,n)=>{const{options:o,methods:i}=kn(e,t,n),r=Y(e,Yo,o);Object.prototype.hasOwnProperty.call(e,"optionsStyle")&&(r.style=e.optionsStyle);const s={...i,setGeojson(a){t.value.clearLayers(),t.value.addData(a)},setOptionsStyle(a){t.value.setStyle(a)},getGeoJSONData(){return t.value.toGeoJSON()},getBounds(){return t.value.getBounds()}};return{options:r,methods:s}};Z({props:Yo,setup(e,t){const n=S(),o=S(!1),i=ee(ne),r=z(de),{methods:s,options:a}=cs(e,n,t);return J(async()=>{const{geoJSON:u}=i?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(u(e.geojson,a));const{listeners:d}=ce(t.attrs);n.value.on(d),te(s,n.value,e),r({...e,...s,leafletObject:n.value}),o.value=!0,N(()=>t.emit("ready",n.value))}),{ready:o,leafletObject:n}},render(){return Ae(this.ready,this.$slots)}});const En={...tt,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},Go=(e,t,n)=>{const{options:o,methods:i}=gt(e,t,n),r=Y(e,En,o),s={...i,setTileComponent(){var a;(a=t.value)==null||a.redraw()}};return Sn(()=>{t.value.off()}),{options:r,methods:s}},ds=(e,t,n,o)=>e.extend({initialize(i){this.tileComponents={},this.on("tileunload",this._unloadTile),n.setOptions(this,i)},createTile(i){const r=this._tileCoordsToKey(i);this.tileComponents[r]=t.create("div");const s=L({setup:o,props:["coords"]},{coords:i});return Er(s,this.tileComponents[r]),this.tileComponents[r]},_unloadTile(i){const r=this._tileCoordsToKey(i.coords);this.tileComponents[r]&&(this.tileComponents[r].innerHTML="",this.tileComponents[r]=void 0)}});Z({props:{...En,childRender:{type:Function,required:!0}},setup(e,t){const n=S(),o=S(null),i=S(!1),r=ee(ne),s=z(de),{options:a,methods:u}=Go(e,n,t);return J(async()=>{const{GridLayer:d,DomUtil:c,Util:v}=r?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]),w=ds(d,c,v,e.childRender);n.value=re(new w(a));const{listeners:h}=ce(t.attrs);n.value.on(h),te(u,n.value,e),s({...e,...u,leafletObject:n.value}),i.value=!0,N(()=>t.emit("ready",n.value))}),{root:o,ready:i,leafletObject:n}},render(){return this.ready?L("div",{style:{display:"none"},ref:"root"}):null}});const ho={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},fs=Z({name:"LIcon",props:{...ho,...mt},setup(e,t){const n=S(),o=ee(ne),i=z(Po),r=z(qo),s=z(Io);let a,u,d,c,v;const w=(q,x,D)=>{const _=q&&q.innerHTML;if(!x){D&&v&&i()&&r(_);return}const{listeners:A}=ce(t.attrs);v&&u(v,A);const{options:H}=yt(e),R=Y(e,ho,H);_&&(R.html=_),v=R.html?d(R):c(R),a(v,A),s(v)},h=()=>{N(()=>w(n.value,!0,!1))},p=()=>{N(()=>w(n.value,!1,!0))},M={setIconUrl:h,setIconRetinaUrl:h,setIconSize:h,setIconAnchor:h,setPopupAnchor:h,setTooltipAnchor:h,setShadowUrl:h,setShadowRetinaUrl:h,setShadowAnchor:h,setBgPos:h,setClassName:h,setHtml:h};return J(async()=>{const{DomEvent:q,divIcon:x,icon:D}=o?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);a=q.on,u=q.off,d=x,c=D,te(M,{},e),new MutationObserver(p).observe(n.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),h()}),{root:n}},render(){const e=this.$slots.default?this.$slots.default():void 0;return L("div",{ref:"root"},e)}}),Xo={...tt,opacity:{type:Number},alt:{type:String},interactive:{type:Boolean,default:void 0},crossOrigin:{type:Boolean,default:void 0},errorOverlayUrl:{type:String},zIndex:{type:Number},className:{type:String},url:{type:String,required:!0,custom:!0},bounds:{type:[Array,Object],required:!0,custom:!0}},hs=(e,t,n)=>{const{options:o,methods:i}=gt(e,t,n),r=Y(e,Xo,o),s={...i,setOpacity(a){return t.value.setOpacity(a)},setUrl(a){return t.value.setUrl(a)},setBounds(a){return t.value.setBounds(a)},getBounds(){return t.value.getBounds()},getElement(){return t.value.getElement()},bringToFront(){return t.value.bringToFront()},bringToBack(){return t.value.bringToBack()},setZIndex(a){return t.value.setZIndex(a)}};return{options:r,methods:s}};Z({name:"LImageOverlay",props:Xo,setup(e,t){const n=S(),o=S(!1),i=ee(ne),r=z(de),{options:s,methods:a}=hs(e,n,t);return J(async()=>{const{imageOverlay:u}=i?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(u(e.url,e.bounds,s));const{listeners:d}=ce(t.attrs);n.value.on(d),te(a,n.value,e),r({...e,...a,leafletObject:n.value}),o.value=!0,N(()=>t.emit("ready",n.value))}),{ready:o,leafletObject:n}},render(){return Ae(this.ready,this.$slots)}});Z({props:Kt,setup(e,t){const n=S(),o=S(!1),i=ee(ne),r=z(de),{methods:s}=kn(e,n,t);return J(async()=>{const{layerGroup:a}=i?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(a(void 0,e.options));const{listeners:u}=ce(t.attrs);n.value.on(u),te(s,n.value,e),r({...e,...s,leafletObject:n.value}),o.value=!0,N(()=>t.emit("ready",n.value))}),{ready:o,leafletObject:n}},render(){return Ae(this.ready,this.$slots)}});function Zo(e,t,n){var o,i,r;t===void 0&&(t=50),n===void 0&&(n={});var s=(o=n.isImmediate)!=null&&o,a=(i=n.callback)!=null&&i,u=n.maxWait,d=Date.now(),c=[];function v(){if(u!==void 0){var h=Date.now()-d;if(h+t>=u)return u-h}return t}var w=function(){var h=[].slice.call(arguments),p=this;return new Promise(function(M,q){var x=s&&r===void 0;if(r!==void 0&&clearTimeout(r),r=setTimeout(function(){if(r=void 0,d=Date.now(),!s){var _=e.apply(p,h);a&&a(_),c.forEach(function(A){return(0,A.resolve)(_)}),c=[]}},v()),x){var D=e.apply(p,h);return a&&a(D),M(D)}c.push({resolve:M,reject:q})})};return w.cancel=function(h){r!==void 0&&clearTimeout(r),c.forEach(function(p){return(0,p.reject)(h)}),c=[]},w}const po={...mt,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},ps=Z({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:po,setup(e,t){const n=S(),o=kr({ready:!1,layersToAdd:[],layersInControl:[]}),{options:i}=yt(e),r=Y(e,po,i),{listeners:s,attrs:a}=ce(t.attrs),u=Bt(de),d=Bt(Wt),c=Bt(vt),v=Bt(Vo);be(ne,e.useGlobalLeaflet);const w=k(()=>{const x={};return e.noBlockingAnimations&&(x.animate=!1),x}),h=k(()=>{const x=w.value;return e.padding&&(x.padding=e.padding),e.paddingTopLeft&&(x.paddingTopLeft=e.paddingTopLeft),e.paddingBottomRight&&(x.paddingBottomRight=e.paddingBottomRight),x}),p={moveend:Zo(x=>{o.leafletRef&&(t.emit("update:zoom",o.leafletRef.getZoom()),t.emit("update:center",o.leafletRef.getCenter()),t.emit("update:bounds",o.leafletRef.getBounds()))}),overlayadd(x){const D=o.layersInControl.find(_=>_.name===x.name);D&&D.updateVisibleProp(!0)},overlayremove(x){const D=o.layersInControl.find(_=>_.name===x.name);D&&D.updateVisibleProp(!1)}};J(async()=>{e.useGlobalLeaflet&&($.L=$.L||await K(()=>import("./leaflet-src.a40d618f.js").then(function(C){return C.l}),["assets/leaflet-src.a40d618f.js","assets/axios.d2178077.js","assets/index.778c4669.js","assets/index.a07cd3d5.css"]));const{map:x,CRS:D,Icon:_,latLngBounds:A,latLng:H,stamp:R}=e.useGlobalLeaflet?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);try{r.beforeMapMount&&await r.beforeMapMount()}catch(C){console.error(`The following error occurred running the provided beforeMapMount hook ${C.message}`)}await Zr(_);const G=typeof r.crs=="string"?D[r.crs]:r.crs;r.crs=G||D.EPSG3857;const Q={addLayer(C){C.layerType!==void 0&&(o.layerControl===void 0?o.layersToAdd.push(C):o.layersInControl.find(I=>R(I.leafletObject)===R(C.leafletObject))||(o.layerControl.addLayer(C),o.layersInControl.push(C))),C.visible!==!1&&o.leafletRef.addLayer(C.leafletObject)},removeLayer(C){C.layerType!==void 0&&(o.layerControl===void 0?o.layersToAdd=o.layersToAdd.filter(I=>I.name!==C.name):(o.layerControl.removeLayer(C.leafletObject),o.layersInControl=o.layersInControl.filter(I=>R(I.leafletObject)!==R(C.leafletObject)))),o.leafletRef.removeLayer(C.leafletObject)},registerLayerControl(C){o.layerControl=C,o.layersToAdd.forEach(I=>{o.layerControl.addLayer(I)}),o.layersToAdd=[],c(C)},registerControl(C){o.leafletRef.addControl(C.leafletObject)},setZoom(C){const I=o.leafletRef.getZoom();C!==I&&o.leafletRef.setZoom(C,w.value)},setCrs(C){const I=o.leafletRef.getBounds();o.leafletRef.options.crs=C,o.leafletRef.fitBounds(I,{animate:!1,padding:[0,0]})},fitBounds(C){o.leafletRef.fitBounds(C,h.value)},setBounds(C){if(!C)return;const I=A(C);!I.isValid()||!(o.lastSetBounds||o.leafletRef.getBounds()).equals(I,0)&&(o.lastSetBounds=I,o.leafletRef.fitBounds(I))},setCenter(C){if(C==null)return;const I=H(C),we=o.lastSetCenter||o.leafletRef.getCenter();(we.lat!==I.lat||we.lng!==I.lng)&&(o.lastSetCenter=I,o.leafletRef.panTo(I,w.value))}};Vt(u,Q.addLayer),Vt(d,Q.removeLayer),Vt(c,Q.registerControl),Vt(v,Q.registerLayerControl),o.leafletRef=re(x(n.value,r)),te(Q,o.leafletRef,e),fo(o.leafletRef,p),fo(o.leafletRef,s),o.ready=!0,N(()=>t.emit("ready",o.leafletRef))}),Le(()=>{Bo(p),o.leafletRef&&(o.leafletRef.off(),o.leafletRef.remove())});const M=k(()=>o.leafletRef),q=k(()=>o.ready);return{root:n,ready:q,leafletObject:M,attrs:a}},render({attrs:e}){return e.style||(e.style={}),e.style.width||(e.style.width="100%"),e.style.height||(e.style.height="100%"),L("div",{...e,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),vs=["Symbol(Comment)","Symbol(Text)"],ms=["LTooltip","LPopup"],ei={...tt,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},ys=(e,t,n)=>{const{options:o,methods:i}=gt(e,t,n),r=Y(e,ei,o),s={...i,setDraggable(a){t.value.dragging&&(a?t.value.dragging.enable():t.value.dragging.disable())},latLngSync(a){n.emit("update:latLng",a.latlng),n.emit("update:lat-lng",a.latlng)},setLatLng(a){if(a!=null&&t.value){const u=t.value.getLatLng();(!u||!u.equals(a))&&t.value.setLatLng(a)}}};return{options:r,methods:s}},gs=(e,t)=>{const n=t.slots.default&&t.slots.default();return n&&n.length&&n.some(bs)};function bs(e){return!(vs.includes(e.type.toString())||ms.includes(e.type.name))}const ws=Z({name:"LMarker",props:ei,setup(e,t){const n=S(),o=S(!1),i=ee(ne),r=z(de);be(Po,()=>{var d;return!!((d=n.value)!=null&&d.getElement())}),be(qo,d=>{var c,v;const w=Ie((c=n.value)==null?void 0:c.getElement)&&((v=n.value)==null?void 0:v.getElement());w&&(w.innerHTML=d)}),be(Io,d=>{var c;return((c=n.value)==null?void 0:c.setIcon)&&n.value.setIcon(d)});const{options:s,methods:a}=ys(e,n,t),u={moveHandler:Zo(a.latLngSync)};return J(async()=>{const{marker:d,divIcon:c}=i?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);gs(s,t)&&(s.icon=c({className:""})),n.value=re(d(e.latLng,s));const{listeners:v}=ce(t.attrs);n.value.on(v),n.value.on("move",u.moveHandler),te(a,n.value,e),r({...e,...a,leafletObject:n.value}),o.value=!0,N(()=>t.emit("ready",n.value))}),Le(()=>Bo(u)),{ready:o,leafletObject:n}},render(){return Ae(this.ready,this.$slots)}}),On={..._n,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},ti=(e,t,n)=>{const{options:o,methods:i}=jo(e,t,n),r=Y(e,On,o),s={...i,setSmoothFactor(a){t.value.setStyle({smoothFactor:a})},setNoClip(a){t.value.setStyle({noClip:a})},addLatLng(a){t.value.addLatLng(a)}};return{options:r,methods:s}},Ht={...On},ni=(e,t,n)=>{const{options:o,methods:i}=ti(e,t,n),r=Y(e,Ht,o),s={...i,toGeoJSON(a){return t.value.toGeoJSON(a)}};return{options:r,methods:s}};Z({name:"LPolygon",props:Ht,setup(e,t){const n=S(),o=S(!1),i=ee(ne),r=z(de),{options:s,methods:a}=ni(e,n,t);return J(async()=>{const{polygon:u}=i?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(u(e.latLngs,s));const{listeners:d}=ce(t.attrs);n.value.on(d),te(a,n.value,e),r({...e,...a,leafletObject:n.value}),o.value=!0,N(()=>t.emit("ready",n.value))}),{ready:o,leafletObject:n}},render(){return Ae(this.ready,this.$slots)}});const Ss=Z({name:"LPolyline",props:On,setup(e,t){const n=S(),o=S(!1),i=ee(ne),r=z(de),{options:s,methods:a}=ti(e,n,t);return J(async()=>{const{polyline:u}=i?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(u(e.latLngs,s));const{listeners:d}=ce(t.attrs);n.value.on(d),te(a,n.value,e),r({...e,...a,leafletObject:n.value}),o.value=!0,N(()=>t.emit("ready",n.value))}),{ready:o,leafletObject:n}},render(){return Ae(this.ready,this.$slots)}}),oi={...mt,content:{type:String,default:null}},ii=(e,t)=>{const{options:n,methods:o}=yt(e),i={...o,setContent(r){t.value&&r!==null&&r!==void 0&&t.value.setContent(r)}};return{options:n,methods:i}},ri=e=>e.default?L("div",{ref:"root"},e.default()):null,_s={...oi,latLng:{type:[Object,Array],default:()=>[]}},Cs=(e,t)=>{const{options:n,methods:o}=ii(e,t);return{options:n,methods:o}};Z({name:"LPopup",props:_s,setup(e,t){const n=S(),o=S(null),i=ee(ne),r=z(No),s=z(Mo),{options:a,methods:u}=Cs(e,n);return J(async()=>{const{popup:d}=i?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(d(a)),e.latLng!==void 0&&n.value.setLatLng(e.latLng),te(u,n.value,e);const{listeners:c}=ce(t.attrs);n.value.on(c),n.value.setContent(e.content||o.value||""),r(n.value),N(()=>t.emit("ready",n.value))}),Le(()=>{s()}),{root:o,leafletObject:n}},render(){return ri(this.$slots)}});const si={...Ht,latLngs:{...Ht.latLngs,required:!1},bounds:{type:Object,custom:!0}},ks=(e,t,n)=>{const{options:o,methods:i}=ni(e,t,n),r=Y(e,si,o),s={...i,setBounds(a){t.value.setBounds(a)},setLatLngs(a){t.value.setBounds(a)}};return{options:r,methods:s}};Z({name:"LRectangle",props:si,setup(e,t){const n=S(),o=S(!1),i=ee(ne),r=z(de),{options:s,methods:a}=ks(e,n,t);return J(async()=>{const{rectangle:u,latLngBounds:d}=i?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]),c=e.bounds?d(e.bounds):d(e.latLngs||[]);n.value=re(u(c,s));const{listeners:v}=ce(t.attrs);n.value.on(v),te(a,n.value,e),r({...e,...a,leafletObject:n.value}),o.value=!0,N(()=>t.emit("ready",n.value))}),{ready:o,leafletObject:n}},render(){return Ae(this.ready,this.$slots)}});const Ln={...En,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:e=>typeof e=="string"?!0:Array.isArray(e)?e.every(t=>typeof t=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},li=(e,t,n)=>{const{options:o,methods:i}=Go(e,t,n),r=Y(e,Ln,o),s={...i};return{options:r,methods:s}},Es=Z({props:Ln,setup(e,t){const n=S(),o=ee(ne),i=z(de),{options:r,methods:s}=li(e,n,t);return J(async()=>{const{tileLayer:a}=o?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(a(e.url,r));const{listeners:u}=ce(t.attrs);n.value.on(u),te(s,n.value,e),i({...e,...s,leafletObject:n.value}),N(()=>t.emit("ready",n.value))}),{leafletObject:n}},render(){return null}}),Os={...oi},Ls=(e,t)=>{const{options:n,methods:o}=ii(e,t),i=z(zo);return Le(()=>{i()}),{options:n,methods:o}};Z({name:"LTooltip",props:Os,setup(e,t){const n=S(),o=S(null),i=ee(ne),r=z(Do),{options:s,methods:a}=Ls(e,n);return J(async()=>{const{tooltip:u}=i?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(u(s)),te(a,n.value,e);const{listeners:d}=ce(t.attrs);n.value.on(d),n.value.setContent(e.content||o.value||""),r(n.value),N(()=>t.emit("ready",n.value))}),{root:o,leafletObject:n}},render(){return ri(this.$slots)}});const ai={...Ln,layers:{type:String,required:!0},styles:{type:String},format:{type:String},transparent:{type:Boolean,default:void 0},version:{type:String},crs:{type:Object},uppercase:{type:Boolean,default:void 0}},As=(e,t,n)=>{const{options:o,methods:i}=li(e,t,n);return{options:Y(e,ai,o),methods:{...i}}};Z({props:ai,setup(e,t){const n=S(),o=ee(ne),i=z(de),{options:r,methods:s}=As(e,n,t);return J(async()=>{const{tileLayer:a}=o?$.L:await K(()=>import("./leaflet-src.esm.5b9ad573.js"),[]);n.value=re(a.wms(e.url,r));const{listeners:u}=ce(t.attrs);n.value.on(u),te(s,n.value,e),i({...e,...s,leafletObject:n.value}),N(()=>t.emit("ready",n.value))}),{leafletObject:n}},render(){return null}});var Ts=[[-17.960229914458722,-67.1055],[-17.960675596242925,-67.10565],[-17.961119456087815,-67.10578],[-17.96156840100902,-67.10596],[-17.96201770845455,-67.1060860389393],[-17.96245631371623,-67.10620945635077],[-17.962889946430252,-67.10634361333734],[-17.96331372190538,-67.10648842040705],[-17.963752584108157,-67.1066010075582],[-17.964191227024976,-67.10671909276878],[-17.96462521074912,-67.10684781016406],[-17.96506903829549,-67.10692287025354],[-17.96548259722565,-67.10709985667206],[-17.965926789072512,-67.10719103149371],[-17.96634483621263,-67.10737354580226],[-17.966783738442334,-67.10748609596344],[-17.967233032627533,-67.10753972821148],[-17.96765679768704,-67.10768989850598],[-17.968090772899348,-67.10781325267645],[-17.9685298526175,-67.10792588039732],[-17.968967353561286,-67.10803875988894],[-17.969401311567772,-67.1081728440887],[-17.96984038802877,-67.1082908350344],[-17.970274357877123,-67.10839809953046],[-17.970713432168093,-67.10847854790251],[-17.971142294375476,-67.1086126285226],[-17.97157115554161,-67.10875743559228],[-17.971611999407873,-67.109229399375],[-17.971453729373447,-67.1096745470337],[-17.971335368838037,-67.11013073854018],[-17.97122308157441,-67.11058665560462],[-17.971110855779546,-67.11104266693394],[-17.97098321270936,-67.11149854581515],[-17.970840258627188,-67.11194369347385],[-17.97068752139513,-67.11238391701501],[-17.97061597431671,-67.11285049609484],[-17.970416859256648,-67.1132795540791],[-17.970309643362132,-67.11374079141221],[-17.97017689978351,-67.11419666552051],[-17.969738050740084,-67.11427746589432],[-17.96932487940682,-67.11410040549578],[-17.969166607323213,-67.11454555315444],[-17.969074785663256,-67.11500687639986],[-17.969513899300726,-67.11511419339789],[-17.969947869951138,-67.11524827401797],[-17.969789427790516,-67.11569352190767],[-17.96965672578047,-67.11614417359186],[-17.96950355953787,-67.11658395802576],[-17.96939123754222,-67.11704519535886],[-17.969217648862998,-67.11748497979275],[-17.968967789941708,-67.11787692357161],[-17.96854913359803,-67.11769457392832],[-17.96810512177793,-67.1177857547161],[-17.96772261936159,-67.11803791219414],[-17.9673039600672,-67.11787701545005],[-17.967125263724835,-67.11831143665913],[-17.967385756062253,-67.11869766879114],[-17.967569557740767,-67.11913209000024]];const Oe=Object.create(null);Oe.open="0";Oe.close="1";Oe.ping="2";Oe.pong="3";Oe.message="4";Oe.upgrade="5";Oe.noop="6";const Dt=Object.create(null);Object.keys(Oe).forEach(e=>{Dt[Oe[e]]=e});const hn={type:"error",data:"parser error"},ui=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ci=typeof ArrayBuffer=="function",di=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,An=({type:e,data:t},n,o)=>ui&&t instanceof Blob?n?o(t):vo(t,o):ci&&(t instanceof ArrayBuffer||di(t))?n?o(t):vo(new Blob([t]),o):o(Oe[e]+(t||"")),vo=(e,t)=>{const n=new FileReader;return n.onload=function(){const o=n.result.split(",")[1];t("b"+(o||""))},n.readAsDataURL(e)};function mo(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let on;function xs(e,t){if(ui&&e.data instanceof Blob)return e.data.arrayBuffer().then(mo).then(t);if(ci&&(e.data instanceof ArrayBuffer||di(e.data)))return t(mo(e.data));An(e,!1,n=>{on||(on=new TextEncoder),t(on.encode(n))})}const yo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ft=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let e=0;e<yo.length;e++)ft[yo.charCodeAt(e)]=e;const Rs=e=>{let t=e.length*.75,n=e.length,o,i=0,r,s,a,u;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),c=new Uint8Array(d);for(o=0;o<n;o+=4)r=ft[e.charCodeAt(o)],s=ft[e.charCodeAt(o+1)],a=ft[e.charCodeAt(o+2)],u=ft[e.charCodeAt(o+3)],c[i++]=r<<2|s>>4,c[i++]=(s&15)<<4|a>>2,c[i++]=(a&3)<<6|u&63;return d},Bs=typeof ArrayBuffer=="function",Tn=(e,t)=>{if(typeof e!="string")return{type:"message",data:fi(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:Vs(e.substring(1),t)}:Dt[n]?e.length>1?{type:Dt[n],data:e.substring(1)}:{type:Dt[n]}:hn},Vs=(e,t)=>{if(Bs){const n=Rs(e);return fi(n,t)}else return{base64:!0,data:e}},fi=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},hi=String.fromCharCode(30),Ps=(e,t)=>{const n=e.length,o=new Array(n);let i=0;e.forEach((r,s)=>{An(r,!1,a=>{o[s]=a,++i===n&&t(o.join(hi))})})},qs=(e,t)=>{const n=e.split(hi),o=[];for(let i=0;i<n.length;i++){const r=Tn(n[i],t);if(o.push(r),r.type==="error")break}return o};function Is(){return new TransformStream({transform(e,t){xs(e,n=>{const o=n.length;let i;if(o<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,o);else if(o<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,o)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(o))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let rn;function Pt(e){return e.reduce((t,n)=>t+n.length,0)}function qt(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let o=0;for(let i=0;i<t;i++)n[i]=e[0][o++],o===e[0].length&&(e.shift(),o=0);return e.length&&o<e[0].length&&(e[0]=e[0].slice(o)),n}function Ns(e,t){rn||(rn=new TextDecoder);const n=[];let o=0,i=-1,r=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(o===0){if(Pt(n)<1)break;const u=qt(n,1);r=(u[0]&128)===128,i=u[0]&127,i<126?o=3:i===126?o=1:o=2}else if(o===1){if(Pt(n)<2)break;const u=qt(n,2);i=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),o=3}else if(o===2){if(Pt(n)<8)break;const u=qt(n,8),d=new DataView(u.buffer,u.byteOffset,u.length),c=d.getUint32(0);if(c>Math.pow(2,53-32)-1){a.enqueue(hn);break}i=c*Math.pow(2,32)+d.getUint32(4),o=3}else{if(Pt(n)<i)break;const u=qt(n,i);a.enqueue(Tn(r?u:rn.decode(u),t)),o=0}if(i===0||i>e){a.enqueue(hn);break}}}})}const pi=4;function se(e){if(e)return Ds(e)}function Ds(e){for(var t in se.prototype)e[t]=se.prototype[t];return e}se.prototype.on=se.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};se.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};se.prototype.off=se.prototype.removeListener=se.prototype.removeAllListeners=se.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var o,i=0;i<n.length;i++)if(o=n[i],o===t||o.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};se.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(n){n=n.slice(0);for(var o=0,i=n.length;o<i;++o)n[o].apply(this,t)}return this};se.prototype.emitReserved=se.prototype.emit;se.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};se.prototype.hasListeners=function(e){return!!this.listeners(e).length};const me=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function vi(e,...t){return t.reduce((n,o)=>(e.hasOwnProperty(o)&&(n[o]=e[o]),n),{})}const Ms=me.setTimeout,zs=me.clearTimeout;function $t(e,t){t.useNativeTimers?(e.setTimeoutFn=Ms.bind(me),e.clearTimeoutFn=zs.bind(me)):(e.setTimeoutFn=me.setTimeout.bind(me),e.clearTimeoutFn=me.clearTimeout.bind(me))}const Fs=1.33;function js(e){return typeof e=="string"?Hs(e):Math.ceil((e.byteLength||e.size)*Fs)}function Hs(e){let t=0,n=0;for(let o=0,i=e.length;o<i;o++)t=e.charCodeAt(o),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(o++,n+=4);return n}function Us(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function Ws(e){let t={},n=e.split("&");for(let o=0,i=n.length;o<i;o++){let r=n[o].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class Ks extends Error{constructor(t,n,o){super(t),this.description=n,this.context=o,this.type="TransportError"}}class xn extends se{constructor(t){super(),this.writable=!1,$t(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,n,o){return super.emitReserved("error",new Ks(t,n,o)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Tn(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=Us(t);return n.length?"?"+n:""}}const mi="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),pn=64,$s={};let go=0,It=0,bo;function wo(e){let t="";do t=mi[e%pn]+t,e=Math.floor(e/pn);while(e>0);return t}function yi(){const e=wo(+new Date);return e!==bo?(go=0,bo=e):e+"."+wo(go++)}for(;It<pn;It++)$s[mi[It]]=It;let gi=!1;try{gi=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{}const Qs=gi;function bi(e){const t=e.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!t||Qs))return new XMLHttpRequest}catch{}if(!t)try{return new me[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Js(){}const Ys=function(){return new bi({xdomain:!1}).responseType!=null}();class Gs extends xn{constructor(t){if(super(t),this.polling=!1,typeof location!="undefined"){const o=location.protocol==="https:";let i=location.port;i||(i=o?"443":"80"),this.xd=typeof location!="undefined"&&t.hostname!==location.hostname||i!==t.port}const n=t&&t.forceBase64;this.supportsBinary=Ys&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let o=0;this.polling&&(o++,this.once("pollComplete",function(){--o||n()})),this.writable||(o++,this.once("drain",function(){--o||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=o=>{if(this.readyState==="opening"&&o.type==="open"&&this.onOpen(),o.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(o)};qs(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Ps(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=yi()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Ee(this.uri(),t)}doWrite(t,n){const o=this.request({method:"POST",data:t});o.on("success",n),o.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,o)=>{this.onError("xhr poll error",n,o)}),this.pollXhr=t}}class Ee extends se{constructor(t,n){super(),$t(this,n),this.opts=n,this.method=n.method||"GET",this.uri=t,this.data=n.data!==void 0?n.data:null,this.create()}create(){var t;const n=vi(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const o=this.xhr=new bi(n);try{o.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&o.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{o.setRequestHeader("Accept","*/*")}catch{}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(o),"withCredentials"in o&&(o.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(o.timeout=this.opts.requestTimeout),o.onreadystatechange=()=>{var i;o.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(o)),o.readyState===4&&(o.status===200||o.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof o.status=="number"?o.status:0)},0))},o.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document!="undefined"&&(this.index=Ee.requestsCount++,Ee.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=Js,t)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete Ee.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Ee.requestsCount=0;Ee.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",So);else if(typeof addEventListener=="function"){const e="onpagehide"in me?"pagehide":"unload";addEventListener(e,So,!1)}}function So(){for(let e in Ee.requests)Ee.requests.hasOwnProperty(e)&&Ee.requests[e].abort()}const Rn=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0))(),Nt=me.WebSocket||me.MozWebSocket,_o=!0,Xs="arraybuffer",Co=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Zs extends xn{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),n=this.opts.protocols,o=Co?{}:vi(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(o.headers=this.opts.extraHeaders);try{this.ws=_o&&!Co?n?new Nt(t,n):new Nt(t):new Nt(t,n,o)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const o=t[n],i=n===t.length-1;An(o,this.supportsBinary,r=>{const s={};try{_o&&this.ws.send(r)}catch{}i&&Rn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=yi()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}check(){return!!Nt}}class el extends xn{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const n=Ns(Number.MAX_SAFE_INTEGER,this.socket.binaryType),o=t.readable.pipeThrough(n).getReader(),i=Is();i.readable.pipeTo(t.writable),this.writer=i.writable.getWriter();const r=()=>{o.read().then(({done:a,value:u})=>{a||(this.onPacket(u),r())}).catch(a=>{})};r();const s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this.writer.write(s).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const o=t[n],i=n===t.length-1;this.writer.write(o).then(()=>{i&&Rn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}}const tl={websocket:Zs,webtransport:el,polling:Gs},nl=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ol=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function vn(e){if(e.length>2e3)throw"URI too long";const t=e,n=e.indexOf("["),o=e.indexOf("]");n!=-1&&o!=-1&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));let i=nl.exec(e||""),r={},s=14;for(;s--;)r[ol[s]]=i[s]||"";return n!=-1&&o!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=il(r,r.path),r.queryKey=rl(r,r.query),r}function il(e,t){const n=/\/{2,9}/g,o=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&o.splice(0,1),t.slice(-1)=="/"&&o.splice(o.length-1,1),o}function rl(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(o,i,r){i&&(n[i]=r)}),n}class Ne extends se{constructor(t,n={}){super(),this.binaryType=Xs,this.writeBuffer=[],t&&typeof t=="object"&&(n=t,t=null),t?(t=vn(t),n.hostname=t.host,n.secure=t.protocol==="https"||t.protocol==="wss",n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=vn(n.host).host),$t(this,n),this.secure=n.secure!=null?n.secure:typeof location!="undefined"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=n.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Ws(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=pi,n.transport=t,this.id&&(n.sid=this.id);const o=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new tl[t](o)}open(){let t;if(this.opts.rememberUpgrade&&Ne.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(t){let n=this.createTransport(t),o=!1;Ne.priorWebsocketSuccess=!1;const i=()=>{o||(n.send([{type:"ping",data:"probe"}]),n.once("packet",v=>{if(!o)if(v.type==="pong"&&v.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ne.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{o||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const w=new Error("probe error");w.transport=n.name,this.emitReserved("upgradeError",w)}}))};function r(){o||(o=!0,c(),n.close(),n=null)}const s=v=>{const w=new Error("probe error: "+v);w.transport=n.name,r(),this.emitReserved("upgradeError",w)};function a(){s("transport closed")}function u(){s("socket closed")}function d(v){n&&v.name!==n.name&&r()}const c=()=>{n.removeListener("open",i),n.removeListener("error",s),n.removeListener("close",a),this.off("close",u),this.off("upgrading",d)};n.once("open",i),n.once("error",s),n.once("close",a),this.once("close",u),this.once("upgrading",d),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{o||n.open()},200):n.open()}onOpen(){if(this.readyState="open",Ne.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const n=this.upgrades.length;for(;t<n;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=t.data,this.onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let o=0;o<this.writeBuffer.length;o++){const i=this.writeBuffer[o].data;if(i&&(n+=js(i)),o>0&&n>this.maxPayload)return this.writeBuffer.slice(0,o);n+=2}return this.writeBuffer}write(t,n,o){return this.sendPacket("message",t,n,o),this}send(t,n,o){return this.sendPacket("message",t,n,o),this}sendPacket(t,n,o,i){if(typeof n=="function"&&(i=n,n=void 0),typeof o=="function"&&(i=o,o=null),this.readyState==="closing"||this.readyState==="closed")return;o=o||{},o.compress=o.compress!==!1;const r={type:t,data:n,options:o};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},o=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():t()}):this.upgrading?o():t()),this}onError(t){Ne.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const n=[];let o=0;const i=t.length;for(;o<i;o++)~this.transports.indexOf(t[o])&&n.push(t[o]);return n}}Ne.protocol=pi;function sl(e,t="",n){let o=e;n=n||typeof location!="undefined"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n!="undefined"?e=n.protocol+"//"+e:e="https://"+e),o=vn(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const r=o.host.indexOf(":")!==-1?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+r+":"+o.port+t,o.href=o.protocol+"://"+r+(n&&n.port===o.port?"":":"+o.port),o}const ll=typeof ArrayBuffer=="function",al=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,wi=Object.prototype.toString,ul=typeof Blob=="function"||typeof Blob!="undefined"&&wi.call(Blob)==="[object BlobConstructor]",cl=typeof File=="function"||typeof File!="undefined"&&wi.call(File)==="[object FileConstructor]";function Bn(e){return ll&&(e instanceof ArrayBuffer||al(e))||ul&&e instanceof Blob||cl&&e instanceof File}function Mt(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,o=e.length;n<o;n++)if(Mt(e[n]))return!0;return!1}if(Bn(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Mt(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Mt(e[n]))return!0;return!1}function dl(e){const t=[],n=e.data,o=e;return o.data=mn(n,t),o.attachments=t.length,{packet:o,buffers:t}}function mn(e,t){if(!e)return e;if(Bn(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let o=0;o<e.length;o++)n[o]=mn(e[o],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=mn(e[o],t));return n}return e}function fl(e,t){return e.data=yn(e.data,t),delete e.attachments,e}function yn(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=yn(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=yn(e[n],t));return e}const hl=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],pl=5;var P;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(P||(P={}));class vl{constructor(t){this.replacer=t}encode(t){return(t.type===P.EVENT||t.type===P.ACK)&&Mt(t)?this.encodeAsBinary({type:t.type===P.EVENT?P.BINARY_EVENT:P.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===P.BINARY_EVENT||t.type===P.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=dl(t),o=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(o),i}}function ko(e){return Object.prototype.toString.call(e)==="[object Object]"}class Vn extends se{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const o=n.type===P.BINARY_EVENT;o||n.type===P.BINARY_ACK?(n.type=o?P.EVENT:P.ACK,this.reconstructor=new ml(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Bn(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const o={type:Number(t.charAt(0))};if(P[o.type]===void 0)throw new Error("unknown packet type "+o.type);if(o.type===P.BINARY_EVENT||o.type===P.BINARY_ACK){const r=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const s=t.substring(r,n);if(s!=Number(s)||t.charAt(n)!=="-")throw new Error("Illegal attachments");o.attachments=Number(s)}if(t.charAt(n+1)==="/"){const r=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););o.nsp=t.substring(r,n)}else o.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const r=n+1;for(;++n;){const s=t.charAt(n);if(s==null||Number(s)!=s){--n;break}if(n===t.length)break}o.id=Number(t.substring(r,n+1))}if(t.charAt(++n)){const r=this.tryParse(t.substr(n));if(Vn.isPayloadValid(o.type,r))o.data=r;else throw new Error("invalid payload")}return o}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case P.CONNECT:return ko(n);case P.DISCONNECT:return n===void 0;case P.CONNECT_ERROR:return typeof n=="string"||ko(n);case P.EVENT:case P.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&hl.indexOf(n[0])===-1);case P.ACK:case P.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ml{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=fl(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var yl=Object.freeze(Object.defineProperty({__proto__:null,protocol:pl,get PacketType(){return P},Encoder:vl,Decoder:Vn},Symbol.toStringTag,{value:"Module"}));function ye(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const gl=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Si extends se{constructor(t,n,o){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,o&&o.auth&&(this.auth=o.auth),this._opts=Object.assign({},o),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ye(t,"open",this.onopen.bind(this)),ye(t,"packet",this.onpacket.bind(this)),ye(t,"error",this.onerror.bind(this)),ye(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){if(gl.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:P.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const s=this.ids++,a=n.pop();this._registerAckCallback(s,a),o.id=s}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var o;const i=(o=this.flags.timeout)!==null&&o!==void 0?o:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===t&&this.sendBuffer.splice(s,1);n.call(this,new Error("operation has timed out"))},i);this.acks[t]=(...s)=>{this.io.clearTimeoutFn(r),n.apply(this,[null,...s])}}emitWithAck(t,...n){const o=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((i,r)=>{n.push((s,a)=>o?s?r(s):i(a):i(s)),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const o={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...r)=>o!==this._queue[0]?void 0:(i!==null?o.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...r)),o.pending=!1,this._drainQueue())),this._queue.push(o),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:P.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case P.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case P.EVENT:case P.BINARY_EVENT:this.onevent(t);break;case P.ACK:case P.BINARY_ACK:this.onack(t);break;case P.DISCONNECT:this.ondisconnect();break;case P.CONNECT_ERROR:this.destroy();const o=new Error(t.data.message);o.data=t.data.data,this.emitReserved("connect_error",o);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const o of n)o.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let o=!1;return function(...i){o||(o=!0,n.packet({type:P.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(n.apply(this,t.data),delete this.acks[t.id])}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:P.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let o=0;o<n.length;o++)if(t===n[o])return n.splice(o,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let o=0;o<n.length;o++)if(t===n[o])return n.splice(o,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const o of n)o.apply(this,t.data)}}}function ot(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ot.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-n:e+n}return Math.min(e,this.max)|0};ot.prototype.reset=function(){this.attempts=0};ot.prototype.setMin=function(e){this.ms=e};ot.prototype.setMax=function(e){this.max=e};ot.prototype.setJitter=function(e){this.jitter=e};class gn extends se{constructor(t,n){var o;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,$t(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((o=n.randomizationFactor)!==null&&o!==void 0?o:.5),this.backoff=new ot({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||yl;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Ne(this.uri,this.opts);const n=this.engine,o=this;this._readyState="opening",this.skipReconnect=!1;const i=ye(n,"open",function(){o.onopen(),t&&t()}),r=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},s=ye(n,"error",r);if(this._timeout!==!1){const a=this._timeout,u=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),n.close()},a);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(i),this.subs.push(s),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ye(t,"ping",this.onping.bind(this)),ye(t,"data",this.ondata.bind(this)),ye(t,"error",this.onerror.bind(this)),ye(t,"close",this.onclose.bind(this)),ye(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Rn(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let o=this.nsps[t];return o?this._autoConnect&&!o.active&&o.connect():(o=new Si(this,t,n),this.nsps[t]=o),o}_destroy(t){const n=Object.keys(this.nsps);for(const o of n)if(this.nsps[o].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let o=0;o<n.length;o++)this.engine.write(n[o],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const o=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const dt={};function zt(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=sl(e,t.path||"/socket.io"),o=n.source,i=n.id,r=n.path,s=dt[i]&&r in dt[i].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||s;let u;return a?u=new gn(o,t):(dt[i]||(dt[i]=new gn(o,t)),u=dt[i]),n.query&&!t.query&&(t.query=n.queryKey),u.socket(n.path,t)}Object.assign(zt,{Manager:gn,Socket:Si,io:zt,connect:zt});const bl=[{name:"Mapa",visible:!0,url:"https://mt1.google.com/vt/lyrs=r&x={x}&y={y}&z={z}",attribution:"&copy; Google Maps"},{name:"Satelite",visible:!1,url:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",attribution:"&copy; Google Maps"}],wl={components:{LIcon:fs,LMap:ps,LTileLayer:Es,LControl:os,LControlLayers:ss,LPolyline:Ss,LMarker:ws},data(){return{socket:zt(Vr),loading:!1,tileProviders:bl,visibleMap:!0,zoom:15,enviarDatos:!1,url:Br,dialogDancer:!1,dialogChangeDancer:!1,showDancer:!0,dancers:[],dancerAll:[],dancer:{},dancerUpdate:"",latUpdate:0,lngUpdate:0,polyline:{opacity:.5,weight:10,latlngs:Ts,color:"orange"},cog:0,sharing:{url:"https://rutaacfo.com/",title:"Ruta del Carnaval de Oruro 2024",description:"Vive la experiencia del Carnaval de Oruro 2024",quote:"Vive la experiencia del Carnaval de Oruro 2024",hashtags:"Ruta,Carnaval,Oruro",twitterUser:"adimer"},networks:[{network:"email",name:"Email",icon:"far fah fa-lg fa-envelope",color:"#d02727"},{network:"facebook",name:"Facebook",icon:"fab fah fa-lg fa-facebook-f",color:"#1877f2"},{network:"skype",name:"Skype",icon:"fab fah fa-lg fa-skype",color:"#00aff0"},{network:"sms",name:"SMS",icon:"far fah fa-lg fa-comment-dots",color:"#333333"},{network:"telegram",name:"Telegram",icon:"fab fah fa-lg fa-telegram-plane",color:"#0088cc"},{network:"twitter",name:"Twitter",icon:"fab fah fa-lg fa-twitter",color:"#1da1f2"},{network:"whatsapp",name:"Whatsapp",icon:"fab fah fa-lg fa-whatsapp",color:"#25d366"}]}},mounted(){this.postCog(),this.getDancers(),this.$store.swSocket&&(this.socket.on("dance",e=>{this.postCog(),e.forEach(t=>{const n=this.dancers.find(o=>o.id===t.id);n&&(n.lat=t.lat,n.lng=t.lng)})}),this.$store.swSocket=!1)},methods:{filterFn(e,t,n){if(e===""){t(()=>{this.dancers=this.dancerAll});return}const o=e.toLowerCase();t(()=>{this.dancers=this.dancerAll.filter(i=>i.name.toLowerCase().indexOf(o)>-1)})},showDance(e){this.dancer=e,this.dialogDancer=!0},onDragEnd(e,t){this.loading=!0,en.post("dancersUpdate",{id:e.id,lat:t.target._latlng.lat,lng:t.target._latlng.lng}).then(n=>{console.log("res",n)}).finally(()=>{this.loading=!1})},handleMapClick(e){if(!this.$store.isLogin)return!1;this.dancerUpdate="",this.latUpdate=e.latlng.lat,this.lngUpdate=e.latlng.lng,this.dialogChangeDancer=!0},async updateDancers(){if(this.dancerUpdate==="")return this.$q.notify({color:"negative",position:"top",message:"Seleccione un bailar\xEDn",icon:"report_problem"}),!1;this.loading=await!0,await en.post("dancersUpdate",{id:this.dancerUpdate,lat:this.latUpdate,lng:this.lngUpdate}).then(()=>{this.dialogChangeDancer=!1}).finally(()=>{this.loading=!1})},getDancers(){this.loading=!0,this.$axios.get("dancers").then(e=>{this.dancers=e.data,this.dancerAll=e.data}).finally(()=>{this.loading=!1}).catch(e=>{this.$q.notify({color:"negative",position:"top",message:e.response.data.message,icon:"report_problem"})})},getCogs(){en.get("cogs").then(e=>{this.cog=e.data.value})},postCog(){this.$axios.post("cogs").then(e=>{this.cog=e.data.value,this.getCogs()})}}},Sl=["src"],_l={class:"headline"},Cl=["src"],kl={class:"headline"},El=ue("br",null,null,-1),Ol=ue("br",null,null,-1),Ll=ue("br",null,null,-1),Al=ue("br",null,null,-1),Tl=ue("div",null,"Compartir",-1),xl=ue("br",null,null,-1),Rl=["src"],Bl={class:"q-ml-md text-subtitle1 text-center"},Vl=["src"],Pl={class:"text-caption text-capitalize"},ql=ue("div",{class:"q-ml-md"},[ue("div",null,"Seleccionar bailar\xEDn")],-1);function Il(e,t,n,o,i,r){const s=Ve("l-tile-layer"),a=Ve("l-icon"),u=Ve("l-marker"),d=Ve("l-control-layers"),c=Ve("l-polyline"),v=Ve("l-control"),w=Ve("ShareNetwork"),h=Ve("l-map");return xe(),ut(Rr,null,{default:W(()=>[V(h,{zoom:i.zoom,"onUpdate:zoom":t[0]||(t[0]=p=>i.zoom=p),center:[-17.965,-67.1125],"use-global-leaflet":!1,style:{height:"calc(100vh - 107px)"},"min-zoom":12,onClick:r.handleMapClick},{default:W(()=>[(xe(!0),Et(Lt,null,Ot(i.tileProviders,p=>(xe(),ut(s,{key:p.name,name:p.name,visible:p.visible,url:p.url,attribution:p.attribution,"layer-type":"base"},null,8,["name","visible","url","attribution"]))),128)),e.$store.isLogin?(xe(!0),Et(Lt,{key:0},Ot(i.dancers,p=>(xe(),ut(u,{"lat-lng":[parseFloat(p.lat),parseFloat(p.lng)],key:p.id,onDragend:M=>r.onDragEnd(p,M),draggable:!0,onClick:M=>r.showDance(p),name:"marker"},{default:W(()=>[V(a,{"class-name":"someExtraClass"},{default:W(()=>[ue("img",{src:`data:image/png;base64,${p.image}`,style:{width:"40px",height:"40px"}},null,8,Sl),ue("div",_l,xt(p.name),1)]),_:2},1024)]),_:2},1032,["lat-lng","onDragend","onClick"]))),128)):(xe(!0),Et(Lt,{key:1},Ot(i.dancers,p=>(xe(),ut(u,{"lat-lng":[parseFloat(p.lat),parseFloat(p.lng)],key:p.id,onClick:M=>r.showDance(p),name:"marker"},{default:W(()=>[V(a,{"class-name":"someExtraClass"},{default:W(()=>[ue("img",{src:`data:image/png;base64,${p.image}`,style:{width:"40px",height:"40px"}},null,8,Cl),ue("div",kl,xt(p.name),1)]),_:2},1024)]),_:2},1032,["lat-lng","onClick"]))),128)),V(d,{position:"topright",collapsed:!0,"sort-layers":!0}),V(c,{"lat-lngs":i.polyline.latlngs,color:i.polyline.color,opacity:i.polyline.opacity,weight:i.polyline.weight},null,8,["lat-lngs","color","opacity","weight"]),V(v,{position:"topleft"},{default:W(()=>[V(Di,{src:"logo.png",width:"100px"}),El,Ol,V(Pe,{dense:"",size:"12px",label:"Actualizar",color:"primary",icon:"refresh",onClick:r.getDancers,loading:i.loading,"no-caps":""},null,8,["onClick","loading"]),Ll,Al,V(Pe,{dense:"",disable:!0,size:"12px",label:`Vistas ${i.cog}`,color:"primary",icon:"visibility","no-caps":""},null,8,["label"])]),_:1}),V(v,{position:"topright"},{default:W(()=>[Tl,(xe(!0),Et(Lt,null,Ot(i.networks,p=>(xe(),ut(w,{network:p.network,key:p.network,style:Ar({backgroundColor:p.color}),url:i.sharing.url,title:i.sharing.title,description:i.sharing.description,quote:i.sharing.quote,hashtags:i.sharing.hashtags,twitterUser:i.sharing.twitterUser},{default:W(()=>[V(Pe,{size:"xs",icon:p.icon,color:p.color},null,8,["icon","color"]),xl]),_:2},1032,["network","style","url","title","description","quote","hashtags","twitterUser"]))),128))]),_:1})]),_:1},8,["zoom","onClick"]),V(ln,{modelValue:i.dialogDancer,"onUpdate:modelValue":t[1]||(t[1]=p=>i.dialogDancer=p)},{default:W(()=>[V(Xn,{class:"q-pa-md"},{default:W(()=>[V(At,{class:"row items-center q-pa-none q-ma-none"},{default:W(()=>[V(Lr,{size:"40px"},{default:W(()=>[ue("img",{src:"data:image/png;base64,"+i.dancer.image},null,8,Rl)]),_:1}),V(eo),Tt(V(Pe,{flat:"",color:"primary",icon:"close"},null,512),[[Rt]])]),_:1}),V(At,{class:"q-pa-none"},{default:W(()=>[V(dn,null,{default:W(()=>[V(cn,null,{default:W(()=>[ue("div",Bl,[ue("div",null,xt(i.dancer.name),1)]),V(un,null,{default:W(()=>[ue("iframe",{width:"100%",height:"500",src:`https://www.youtube.com/embed/${i.dancer.video}`,title:"PRIMER CONVITE Rumbo al CARNAVAL de ORURO 2024 (1/2)",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,Vl),ue("div",Pl,xt(i.dancer.history),1)]),_:1})]),_:1})]),_:1})]),_:1}),V(Zn,{align:"right"},{default:W(()=>[Tt(V(Pe,{flat:"",color:"primary",label:"Cerrar"},null,512),[[Rt]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),V(ln,{modelValue:i.dialogChangeDancer,"onUpdate:modelValue":t[3]||(t[3]=p=>i.dialogChangeDancer=p)},{default:W(()=>[V(Xn,{class:"q-pa-md"},{default:W(()=>[V(At,{class:"row items-center q-pa-none q-ma-none"},{default:W(()=>[ql,V(eo),Tt(V(Pe,{flat:"",color:"primary",icon:"close"},null,512),[[Rt]])]),_:1}),V(At,{class:"q-pa-none"},{default:W(()=>[V(dn,null,{default:W(()=>[V(cn,null,{default:W(()=>[V(un,null,{default:W(()=>[V(Gr,{modelValue:i.dancerUpdate,"onUpdate:modelValue":t[2]||(t[2]=p=>i.dancerUpdate=p),options:i.dancers,label:"Bailar\xEDn",dense:"",outlined:"","emit-value":"","map-options":"","option-label":"name","option-value":"id",onFilter:r.filterFn,"use-input":""},null,8,["modelValue","options","onFilter"])]),_:1})]),_:1})]),_:1})]),_:1}),V(Zn,{align:"right"},{default:W(()=>[V(Pe,{color:"primary",label:"Cambiar",onClick:r.updateDancers,loading:i.loading},null,8,["onClick","loading"]),Tt(V(Pe,{flat:"",color:"primary",label:"Cerrar",loading:i.loading},null,8,["loading"]),[[Rt]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Ul=Or(wl,[["render",Il]]);export{Ul as default};
